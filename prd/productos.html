<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PRD - Productos | Bambu CRM V2</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="assets/styles.css">
</head>

<body>

    <button class="mobile-menu-toggle" onclick="document.getElementById('sidebar').classList.toggle('open')">‚ò∞ Men√∫</button>

    <nav id="sidebar">
        <div class="logo">
            <span>‚óÜ</span> Bambu CRM v2
        </div>

        <div class="nav-group">
            <div class="nav-header">Navegaci√≥n</div>
            <a href="index.html" class="nav-link">‚Üê PRD General</a>
        </div>

        <div class="nav-group">
            <div class="nav-header">Otros M√≥dulos</div>
            <a href="cotizador-especificacion.html" class="nav-link">Cotizador</a>
            <a href="ventas.html" class="nav-link">Ventas</a>
            <a href="cuenta-corriente.html" class="nav-link">Cuenta Corriente</a>
            <a href="clientes.html" class="nav-link">Clientes</a>
            <a href="productos.html" class="nav-link active">Productos</a>
        </div>

        <div class="nav-group">
            <div class="nav-header">En esta p√°gina</div>
            <ul id="toc" style="list-style: none; padding: 0; margin: 0;">
                <!-- Auto-generado desde los h2 -->
            </ul>
        </div>
    </nav>

    <main>
        <header>
            <div style="margin-bottom: 1rem; font-size: 0.9rem; color: var(--text-secondary); text-transform: uppercase;">
                Qu√≠mica Bambu S.R.L.
            </div>
            <h1>PRD: Productos <br><span style="font-weight: 300; font-size: 1.5rem; color: var(--text-secondary);">Gesti√≥n del cat√°logo de productos</span></h1>

            <table>
                <tr>
                    <td style="width: 150px;"><strong>Versi√≥n</strong></td>
                    <td>2.0</td>
                </tr>
                <tr>
                    <td><strong>Fecha</strong></td>
                    <td>31 Diciembre 2024</td>
                </tr>
                <tr>
                    <td><strong>Estado</strong></td>
                    <td>En especificaci√≥n</td>
                </tr>
            </table>
        </header>

        <!-- SECCI√ìN 1: CONTEXTO Y OBJETIVO -->
        <section id="contexto">
            <h2>1. Contexto y Objetivo</h2>

            <h3>1.1 Prop√≥sito del m√≥dulo</h3>
            <p>El m√≥dulo <strong>Productos</strong> es el cat√°logo centralizado de todos los art√≠culos comercializados por Qu√≠mica Bambu. Gestiona desde productos qu√≠micos individuales hasta packs promocionales, incluyendo su informaci√≥n comercial, inventario y configuraci√≥n de precios.</p>

            <h3>1.2 Problema que resuelve</h3>
            <ul>
                <li>Gesti√≥n unificada del cat√°logo de productos</li>
                <li>Control de stock y alertas de inventario</li>
                <li>Configuraci√≥n de precios por lista (L1, L2, L3) y promociones</li>
                <li>Orden de productos para buscadores (drag & drop)</li>
                <li>Activaci√≥n/desactivaci√≥n de productos sin eliminarlos</li>
                <li>Generaci√≥n de reportes de inventario</li>
            </ul>

            <h3>1.3 Usuarios principales</h3>
            <ul>
                <li><strong>Administrador:</strong> CRUD completo, configuraci√≥n de precios, stock, promociones</li>
                <li><strong>Vendedor:</strong> Solo lectura (ve productos en cotizador seg√∫n disponibilidad)</li>
            </ul>

            <h3>1.4 Simplificaci√≥n v1 ‚Üí v2</h3>
            <table>
                <thead>
                    <tr>
                        <th>Aspecto</th>
                        <th>v1</th>
                        <th>v2</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Campo SKU</td>
                        <td>‚úÖ Exist√≠a</td>
                        <td>‚ùå Eliminado (identificaci√≥n por nombre √∫nicamente)</td>
                    </tr>
                    <tr>
                        <td>Orden de productos</td>
                        <td>Manual (campo num√©rico)</td>
                        <td>Drag & drop visual</td>
                    </tr>
                    <tr>
                        <td>Tipos de producto</td>
                        <td>2 tipos: Producto / Combo</td>
                        <td>1 tipo √∫nico: Todos son "productos" (combos = productos en promoci√≥n con precio fijo)</td>
                    </tr>
                    <tr>
                        <td>Promociones</td>
                        <td>Switch + precio promocional</td>
                        <td>Switch + precio promocional (sin cambios)</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <!-- SECCI√ìN 2: FUNCIONALIDAD PRINCIPAL -->
        <section id="funcionalidad">
            <h2>2. Funcionalidad Principal</h2>

            <h3>2.1 Descripci√≥n general</h3>
            <p>El m√≥dulo Productos centraliza la gesti√≥n del cat√°logo comercial. Cada producto almacena informaci√≥n completa:</p>
            <ul>
                <li>Datos b√°sicos: Nombre, proveedor, peso</li>
                <li>Precios: Lista 1 (base), L2 y L3 se calculan autom√°ticamente</li>
                <li>Stock: Actual, m√≠nimo, alertas</li>
                <li>Configuraci√≥n: Disponibilidad, promociones, orden</li>
            </ul>

            <p>El sistema permite gestionar productos est√°ndar y promocionales (incluyendo combos/packs) usando una √∫nica estructura simplificada.</p>

            <h3>2.2 Caracter√≠sticas clave</h3>
            <ul>
                <li>‚úÖ CRUD completo de productos (crear, leer, editar, eliminar)</li>
                <li>‚úÖ Control de disponibilidad (activar/desactivar sin eliminar)</li>
                <li>‚úÖ Orden visual drag & drop (define aparici√≥n en buscadores)</li>
                <li>‚úÖ Productos en promoci√≥n con precio fijo</li>
                <li>‚úÖ Combos/packs como productos promocionales</li>
                <li>‚úÖ Stock autom√°tico + movimientos manuales</li>
                <li>‚úÖ Alertas de stock m√≠nimo</li>
                <li>‚úÖ Exportaci√≥n de inventario por proveedor</li>
                <li>‚úÖ Persistencia de filtros entre sesiones</li>
                <li>‚úÖ Barra de acciones r√°pidas por producto</li>
            </ul>

            <h3>2.3 Flujo de trabajo t√≠pico</h3>
            <pre><code>Usuario accede a Productos
        ‚Üì
Visualiza tabla con todos los productos
        ‚Üì
Puede filtrar por: Proveedor | Disponibilidad | En promoci√≥n
        ‚Üì
Acciones disponibles:
‚îú‚îÄ [+ Crear producto]
‚îú‚îÄ Reordenar drag & drop
‚îú‚îÄ Editar producto existente
‚îú‚îÄ Ajustar stock
‚îú‚îÄ Activar/desactivar
‚îú‚îÄ Eliminar (si no tiene pedidos asociados)
‚îî‚îÄ Exportar inventario Excel</code></pre>
        </section>

        <!-- SECCI√ìN 3: INTERFAZ DE USUARIO -->
        <section id="interfaz">
            <h2>3. Interfaz de Usuario</h2>

            <h3>3.1 Layout general</h3>
            <p><strong>Vista principal:</strong> Tabla de productos con filtros superiores y bot√≥n [+ Crear producto]</p>

            <p><strong>Estructura:</strong></p>
            <pre><code>‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  PRODUCTOS                                     [+ Crear]     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Filtros:  [Proveedor ‚ñº]  [Disponibilidad ‚ñº]  [B√∫squeda]   ‚îÇ
‚îÇ            [‚òê En promoci√≥n]  [Limpiar filtros]               ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  #  ‚îÇ Nombre         ‚îÇ Proveedor ‚îÇ Precio L1 ‚îÇ Stock ‚îÇ ...  ‚îÇ
‚îÇ  1  ‚îÇ Detergente X   ‚îÇ Prov A    ‚îÇ $4.500    ‚îÇ 120   ‚îÇ ‚ãÆ    ‚îÇ
‚îÇ  2  ‚îÇ Lavandina Y    ‚îÇ Prov B    ‚îÇ $3.200    ‚îÇ 85    ‚îÇ ‚ãÆ    ‚îÇ
‚îÇ  3  ‚îÇ Pack Combo Z   ‚îÇ -         ‚îÇ $15.000 üè∑‚îÇ 20    ‚îÇ ‚ãÆ    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        üè∑ = En promoci√≥n</code></pre>

            <h3>3.2 Filtros y b√∫squeda</h3>
            <table>
                <thead>
                    <tr>
                        <th>Filtro</th>
                        <th>Tipo</th>
                        <th>Opciones</th>
                        <th>Descripci√≥n</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Proveedor</strong></td>
                        <td>Dropdown m√∫ltiple</td>
                        <td>Lista de proveedores existentes</td>
                        <td>Filtra productos de uno o varios proveedores</td>
                    </tr>
                    <tr>
                        <td><strong>Disponibilidad</strong></td>
                        <td>Dropdown</td>
                        <td>Todos / Disponibles / No disponibles</td>
                        <td>Filtra por estado de disponibilidad</td>
                    </tr>
                    <tr>
                        <td><strong>En promoci√≥n</strong></td>
                        <td>Checkbox</td>
                        <td>‚úì Solo promocionales</td>
                        <td>Muestra solo productos con precio promocional activo</td>
                    </tr>
                    <tr>
                        <td><strong>B√∫squeda</strong></td>
                        <td>Input text</td>
                        <td>Busca en nombre de producto</td>
                        <td>Filtrado en tiempo real por nombre</td>
                    </tr>
                </tbody>
            </table>

            <div class="note" style="background: #e7f3ff; border-left: 4px solid #2196F3; padding: 1rem; margin: 1rem 0;">
                <p style="margin: 0;"><strong>‚≠ê Persistencia de filtros (NUEVO):</strong> Al salir del m√≥dulo y volver, los filtros permanecen activos. √ötil para trabajar con subconjuntos (ej: solo productos de un proveedor). Bot√≥n "Limpiar filtros" resetea todo.</p>
            </div>

            <h3>3.3 Tabla principal</h3>
            <p><strong>Columnas visibles:</strong></p>
            <ul>
                <li><strong>#</strong>: N√∫mero de orden (editable drag & drop)</li>
                <li><strong>Nombre</strong>: Nombre del producto + badge üè∑ si en promoci√≥n</li>
                <li><strong>Proveedor</strong>: Nombre del proveedor</li>
                <li><strong>Precio L1</strong>: Precio base lista 1 (o promocional si activo)</li>
                <li><strong>Stock</strong>: Cantidad actual (‚ö†Ô∏è si bajo stock m√≠nimo)</li>
                <li><strong>Peso (kg)</strong>: Peso unitario del producto</li>
                <li><strong>Estado</strong>: Badge verde "Disponible" / gris "No disponible"</li>
                <li><strong>Acciones</strong>: Botones Editar | Ajustar Stock | Eliminar</li>
            </ul>

            <h3>3.4 Drag & Drop para reordenar</h3>
            <p><strong>Funcionalidad:</strong></p>
            <ul>
                <li>Icono ‚ãÆ‚ãÆ a la izquierda del n√∫mero de orden permite arrastrar productos</li>
                <li>Al soltar, el producto se reposiciona en la lista</li>
                <li>Los n√∫meros de orden se recalculan autom√°ticamente</li>
                <li>Define orden de aparici√≥n en buscador del cotizador (productos prioritarios arriba)</li>
                <li>Productos nuevos se agregan autom√°ticamente al final</li>
            </ul>

            <p><strong>Flujo visual:</strong></p>
            <pre><code>Antes de arrastrar:
  1. Detergente A
  2. Lavandina B    ‚Üê usuario agarra este
  3. Cloro C

Durante arrastre:
  1. Detergente A
  [espacio vac√≠o]
  3. Cloro C

Despu√©s de soltar arriba de "1":
  1. Lavandina B    ‚Üê ahora es #1
  2. Detergente A   ‚Üê baj√≥ a #2
  3. Cloro C</code></pre>

            <h3>3.5 Modal: Crear/Editar Producto</h3>
            <p><strong>Campos del formulario:</strong></p>

            <table>
                <thead>
                    <tr>
                        <th>Campo</th>
                        <th>Tipo</th>
                        <th>Obligatorio</th>
                        <th>Descripci√≥n</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Nombre</strong></td>
                        <td>Text</td>
                        <td>‚úÖ S√≠</td>
                        <td>Nombre del producto (√∫nico)</td>
                    </tr>
                    <tr>
                        <td><strong>Proveedor</strong></td>
                        <td>Dropdown</td>
                        <td>‚ùå No</td>
                        <td>Selecci√≥n de proveedor existente (combos pueden no tener)</td>
                    </tr>
                    <tr>
                        <td><strong>Precio base (L1)</strong></td>
                        <td>Number</td>
                        <td>‚úÖ S√≠</td>
                        <td>Precio lista 1 (base). L2 y L3 se calculan autom√°ticamente</td>
                    </tr>
                    <tr>
                        <td><strong>Stock actual</strong></td>
                        <td>Number</td>
                        <td>‚úÖ S√≠</td>
                        <td>Cantidad en inventario</td>
                    </tr>
                    <tr>
                        <td><strong>Stock m√≠nimo</strong></td>
                        <td>Number</td>
                        <td>‚úÖ S√≠</td>
                        <td>Umbral para alerta de stock bajo</td>
                    </tr>
                    <tr>
                        <td><strong>Peso (kg)</strong></td>
                        <td>Number</td>
                        <td>‚úÖ S√≠</td>
                        <td>Peso unitario del producto</td>
                    </tr>
                    <tr>
                        <td><strong>Disponible</strong></td>
                        <td>Switch</td>
                        <td>-</td>
                        <td>ON = aparece en cotizador | OFF = no se puede vender</td>
                    </tr>
                    <tr>
                        <td><strong>En promoci√≥n</strong></td>
                        <td>Switch</td>
                        <td>-</td>
                        <td>Activa campo de precio promocional</td>
                    </tr>
                    <tr>
                        <td><strong>Precio promocional</strong></td>
                        <td>Number</td>
                        <td>Condicional</td>
                        <td>Solo si "En promoci√≥n" = ON. Precio fijo que ignora listas</td>
                    </tr>
                </tbody>
            </table>

            <div class="note" style="background: #f8f9fa; border-left: 4px solid #6c757d; padding: 1rem; margin: 1rem 0;">
                <p style="margin: 0.5rem 0;"><strong>Campo SKU eliminado</strong> ‚≠ê NUEVO (Dic 2024): El campo SKU ha sido eliminado completamente. Los productos se identifican √∫nicamente por su nombre.</p>
            </div>

            <h3>3.6 Modal: Ajustar Stock</h3>
            <p><strong>Acceso:</strong> Bot√≥n "Ajustar Stock" en barra de acciones de cada producto</p>

            <p><strong>Campos:</strong></p>
            <ul>
                <li><strong>Producto:</strong> Nombre (solo lectura)</li>
                <li><strong>Stock actual:</strong> Cantidad (solo lectura)</li>
                <li><strong>Tipo de movimiento:</strong>
                    <ul>
                        <li>‚óã Ingreso (+): Producci√≥n, compra</li>
                        <li>‚óã Ajuste (-): Correcci√≥n de inventario, merma, rotura</li>
                    </ul>
                </li>
                <li><strong>Cantidad:</strong> Monto a sumar o restar</li>
                <li><strong>Motivo:</strong> Descripci√≥n del movimiento (obligatorio)</li>
                <li><strong>Fecha:</strong> Fecha del movimiento (default: hoy)</li>
            </ul>

            <p><strong>Vista previa:</strong> "Stock despu√©s del movimiento: XXX unidades"</p>

            <p><strong>Efecto:</strong></p>
            <ul>
                <li>Actualiza stock del producto</li>
                <li>Registra movimiento en historial</li>
                <li>Muestra notificaci√≥n: ‚úÖ "Stock actualizado correctamente"</li>
            </ul>

            <h3>3.7 Barra de acciones r√°pidas</h3>
            <p><strong>Ubicaci√≥n:</strong> Columna "Acciones" a la derecha de cada fila</p>

            <p><strong>Botones disponibles:</strong></p>
            <ul>
                <li><strong>[Editar]</strong>: Abre modal Editar Producto</li>
                <li><strong>[Ajustar Stock]</strong>: Abre modal Ajustar Stock</li>
                <li><strong>[Eliminar]</strong>: Confirmaci√≥n ‚Üí Elimina producto (si no tiene pedidos asociados)</li>
            </ul>

            <div class="note" style="background: #fff3cd; border-left: 4px solid #ffc107; padding: 1rem; margin: 1rem 0;">
                <p style="margin: 0;"><strong>‚ö†Ô∏è Restricci√≥n de eliminaci√≥n:</strong> No se puede eliminar un producto que tenga pedidos asociados (activos o hist√≥ricos). En su lugar, usar "No disponible" para desactivarlo.</p>
            </div>

            <h3>3.8 Exportar inventario</h3>
            <p><strong>Ubicaci√≥n:</strong> Bot√≥n [Exportar Excel] en header superior</p>

            <p><strong>Modal de exportaci√≥n:</strong></p>
            <ul>
                <li><strong>Filtro por proveedor:</strong> Selector m√∫ltiple (permite elegir uno o varios)</li>
                <li><strong>Vista previa:</strong> "X productos seleccionados"</li>
                <li><strong>Bot√≥n:</strong> [Descargar Excel]</li>
            </ul>

            <p><strong>Archivo generado:</strong></p>
            <ul>
                <li>Nombre: <code>inventario_bambu_YYYY-MM-DD.xlsx</code></li>
                <li>Columnas: Nombre | Proveedor | Stock Actual | Stock M√≠nimo | Precio L1</li>
                <li>Ordenado por proveedor y nombre</li>
            </ul>

            <p><strong>Uso:</strong> Reporte r√°pido de inventario para control interno o env√≠o a proveedores</p>
        </section>

        <!-- SECCI√ìN 4: REGLAS DE NEGOCIO -->
        <section id="reglas">
            <h2>4. Reglas de Negocio Espec√≠ficas</h2>

            <h3>4.1 Validaciones</h3>
            <table>
                <thead>
                    <tr>
                        <th>Campo</th>
                        <th>Validaci√≥n</th>
                        <th>Mensaje de error</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Nombre</strong></td>
                        <td>√önico (no puede haber 2 productos con mismo nombre)</td>
                        <td>"Ya existe un producto con este nombre"</td>
                    </tr>
                    <tr>
                        <td><strong>Precio base L1</strong></td>
                        <td>Mayor a 0</td>
                        <td>"El precio debe ser mayor a 0"</td>
                    </tr>
                    <tr>
                        <td><strong>Precio promocional</strong></td>
                        <td>Menor a precio L1</td>
                        <td>"El precio promocional debe ser menor al precio L1"</td>
                    </tr>
                    <tr>
                        <td><strong>Stock actual</strong></td>
                        <td>Puede ser negativo (devoluciones)</td>
                        <td>-</td>
                    </tr>
                    <tr>
                        <td><strong>Stock m√≠nimo</strong></td>
                        <td>Mayor o igual a 0</td>
                        <td>"El stock m√≠nimo no puede ser negativo"</td>
                    </tr>
                    <tr>
                        <td><strong>Peso (kg)</strong></td>
                        <td>Mayor a 0</td>
                        <td>"El peso debe ser mayor a 0"</td>
                    </tr>
                </tbody>
            </table>

            <h3>4.2 Producto no disponible</h3>
            <p><strong>Comportamiento:</strong></p>
            <ul>
                <li>Switch en modal de edici√≥n</li>
                <li>Si <code>Disponible = OFF</code>:
                    <ul>
                        <li>‚ùå NO aparece en buscador del cotizador</li>
                        <li>‚úÖ Permanece en el sistema para consulta</li>
                        <li>‚úÖ Los pedidos existentes que lo contengan NO se afectan</li>
                        <li>‚úÖ Es reversible (se puede volver a activar)</li>
                    </ul>
                </li>
            </ul>

            <p><strong>Uso t√≠pico:</strong> Productos descontinuados, temporalmente sin stock, o reemplazados por nuevas versiones</p>

            <h3>4.3 Producto en promoci√≥n</h3>
            <p><strong>Comportamiento:</strong></p>
            <ul>
                <li>Switch "En promoci√≥n" en modal de edici√≥n</li>
                <li>Al activar, habilita campo "Precio promocional"</li>
                <li>El precio promocional es <strong>fijo</strong>, independiente de la lista seleccionada</li>
                <li>Productos promocionales NO entran en c√°lculo de umbral de descuento autom√°tico</li>
            </ul>

            <p><strong>Ejemplo:</strong></p>
            <table>
                <thead>
                    <tr>
                        <th>Concepto</th>
                        <th>Precio normal</th>
                        <th>Precio en promoci√≥n</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Lista 1 (L1)</td>
                        <td>$4.500</td>
                        <td rowspan="3" style="vertical-align: middle; text-align: center; font-weight: bold; background: #ffe082;">$4.100<br>(precio fijo)</td>
                    </tr>
                    <tr>
                        <td>Lista 2 (L2)</td>
                        <td>$4.300</td>
                    </tr>
                    <tr>
                        <td>Lista 3 (L3)</td>
                        <td>$4.100</td>
                    </tr>
                </tbody>
            </table>

            <p><strong>Regla:</strong> Si est√° en promoci√≥n a $4.100, <strong>siempre</strong> se cobra $4.100 sin importar la lista seleccionada</p>

            <h3>4.4 Combos y packs</h3>
            <p><strong>Concepto simplificado:</strong> NO existe una categor√≠a separada de "Combo". Los combos se crean como <strong>productos normales</strong> activando el campo "En promoci√≥n" con un precio fijo.</p>

            <p><strong>Ejemplo de combo:</strong></p>
            <ul>
                <li><strong>Nombre:</strong> "Pack Limpieza Completo"</li>
                <li><strong>En promoci√≥n:</strong> ‚úì Activado</li>
                <li><strong>Precio promocional:</strong> $15.000 (precio fijo)</li>
                <li><strong>Proveedor:</strong> (opcional, puede no tener)</li>
                <li><strong>Stock:</strong> Se controla manualmente si se desea</li>
            </ul>

            <div class="note" style="background: #e7f3ff; border-left: 4px solid #2196F3; padding: 1rem; margin: 1rem 0;">
                <p style="margin: 0;"><strong>Simplificaci√≥n v2:</strong> Esta aproximaci√≥n elimina la complejidad de tener dos tipos de productos diferentes. Todo es un "producto" con la opci√≥n de precio promocional para combos. El precio promocional act√∫a de forma independiente a las listas de descuento, permitiendo ofrecer combos a precio fijo.</p>
            </div>

            <h3>4.5 Orden de productos</h3>
            <p><strong>Funcionalidad drag & drop:</strong></p>
            <ul>
                <li>Los productos nuevos se agregan autom√°ticamente al final de la lista</li>
                <li>Se puede reordenar arrastrando y soltando productos</li>
                <li>El n√∫mero de orden se ajusta autom√°ticamente al reordenar</li>
                <li>Define el orden de aparici√≥n en el buscador del cotizador (productos prioritarios aparecen primero)</li>
                <li>Interfaz visual intuitiva sin necesidad de ingresar n√∫meros manualmente</li>
            </ul>

            <p><strong>Impacto en el cotizador:</strong></p>
            <ul>
                <li>Al buscar productos en el cotizador, aparecen ordenados seg√∫n este campo</li>
                <li>Productos frecuentes pueden colocarse arriba para acceso r√°pido</li>
                <li>Productos de temporada pueden priorizarse temporalmente</li>
            </ul>

            <h3>4.6 Stock</h3>
            <p><strong>Movimientos autom√°ticos:</strong></p>
            <ul>
                <li>Se confirma un pedido ‚Üí se descuenta stock</li>
                <li>Se modifica un pedido ‚Üí se ajusta stock (suma o resta seg√∫n el cambio)</li>
                <li>Se elimina un pedido ‚Üí se reintegra stock</li>
            </ul>

            <p><strong>Movimientos manuales:</strong></p>
            <ul>
                <li>Ingreso de stock (+): Producci√≥n, compra</li>
                <li>Ajuste de stock (-): Correcci√≥n de inventario, merma, rotura</li>
                <li>Cada movimiento registra: cantidad, motivo, fecha, usuario</li>
            </ul>

            <p><strong>Alertas de stock bajo:</strong></p>
            <ul>
                <li>Si <code>stock_actual < stock_minimo</code> ‚Üí Badge ‚ö†Ô∏è en tabla</li>
                <li>Dashboard puede mostrar panel "Productos con stock bajo"</li>
            </ul>

            <div class="note" style="background: #fff3cd; border-left: 4px solid #ffc107; padding: 1rem; margin: 1rem 0;">
                <p style="margin: 0;"><strong>‚ö†Ô∏è Stock negativo permitido:</strong> El sistema permite stock negativo para manejar casos de devoluciones o ajustes de inventario.</p>
            </div>

            <h3>4.7 Historial de movimientos de stock</h3>
            <p><strong>Acceso:</strong> Desde detalle de producto ‚Üí Pesta√±a "Historial de stock"</p>

            <p><strong>Informaci√≥n registrada:</strong></p>
            <ul>
                <li>Fecha del movimiento</li>
                <li>Tipo: Ingreso (+) / Egreso (-) / Ajuste</li>
                <li>Cantidad afectada</li>
                <li>Motivo (si es manual) o Pedido #XXX (si es autom√°tico)</li>
                <li>Stock resultante despu√©s del movimiento</li>
                <li>Usuario que realiz√≥ el movimiento (si manual)</li>
            </ul>

            <p><strong>Ordenamiento:</strong> Cronol√≥gico descendente (m√°s recientes primero)</p>
        </section>

        <!-- SECCI√ìN 5: INTEGRACI√ìN -->
        <section id="integracion">
            <h2>5. Integraci√≥n con Otros M√≥dulos</h2>

            <h3>5.1 Cotizador</h3>
            <p><strong>Relaci√≥n:</strong> El cotizador consume el cat√°logo de productos para armar pedidos</p>

            <p><strong>Sincronizaci√≥n:</strong></p>
            <ul>
                <li>Solo aparecen productos con <code>Disponible = ON</code></li>
                <li>El orden en el buscador del cotizador respeta el campo "Orden" de productos</li>
                <li>Los precios se calculan seg√∫n la lista seleccionada (L1/L2/L3), excepto promocionales que usan precio fijo</li>
                <li>Al confirmar pedido, el stock se descuenta autom√°ticamente</li>
            </ul>

            <h3>5.2 Stock</h3>
            <p><strong>Relaci√≥n:</strong> El m√≥dulo Stock registra todos los movimientos de inventario</p>

            <p><strong>Sincronizaci√≥n:</strong></p>
            <ul>
                <li>Movimientos autom√°ticos desde pedidos (confirmar, modificar, eliminar)</li>
                <li>Movimientos manuales desde modal "Ajustar Stock" en Productos</li>
                <li>Alertas de stock m√≠nimo se muestran en ambos m√≥dulos</li>
                <li>Historial completo de movimientos por producto</li>
            </ul>

            <h3>5.3 Configuraci√≥n</h3>
            <p><strong>Relaci√≥n:</strong> Configuraci√≥n general define par√°metros que afectan a productos</p>

            <p><strong>Dependencias:</strong></p>
            <ul>
                <li><strong>Listas de precio:</strong> Configuraci√≥n define % de descuento L2 y L3 sobre L1</li>
                <li><strong>Proveedores:</strong> Dropdown de proveedores se alimenta desde Configuraci√≥n</li>
                <li><strong>Comportamiento stock:</strong> Configuraci√≥n define si stock puede ser negativo</li>
            </ul>

            <h3>5.4 Ventas</h3>
            <p><strong>Relaci√≥n:</strong> Ventas muestra pedidos que contienen productos</p>

            <p><strong>Sincronizaci√≥n:</strong></p>
            <ul>
                <li>Al editar un pedido en Ventas, se recalcula stock autom√°ticamente</li>
                <li>Productos eliminados o no disponibles siguen visibles en pedidos hist√≥ricos</li>
                <li>Estad√≠sticas de ventas por producto se generan desde este m√≥dulo</li>
            </ul>
        </section>

        <!-- SECCI√ìN 6: CASOS DE USO -->
        <section id="casos-uso">
            <h2>6. Casos de Uso</h2>

            <h3>Caso 1: Crear producto nuevo</h3>
            <p><strong>Contexto:</strong> Administrador necesita agregar un producto nuevo al cat√°logo</p>
            <p><strong>Acci√≥n:</strong></p>
            <ol>
                <li>Usuario abre m√≥dulo Productos</li>
                <li>Click en [+ Crear producto]</li>
                <li>Completa formulario:
                    <ul>
                        <li>Nombre: "Desengrasante Industrial 5L"</li>
                        <li>Proveedor: "Proveedor A"</li>
                        <li>Precio L1: $8.500</li>
                        <li>Stock actual: 50</li>
                        <li>Stock m√≠nimo: 10</li>
                        <li>Peso: 5.2 kg</li>
                        <li>Disponible: ON</li>
                    </ul>
                </li>
                <li>Click [Guardar]</li>
            </ol>
            <p><strong>Resultado:</strong></p>
            <ul>
                <li>‚úÖ Producto creado correctamente</li>
                <li>‚úÖ Aparece al final de la tabla (√∫ltimo orden)</li>
                <li>‚úÖ Ya disponible en buscador del cotizador</li>
            </ul>

            <h3>Caso 2: Crear combo promocional</h3>
            <p><strong>Contexto:</strong> Administrador quiere crear pack promocional con precio fijo</p>
            <p><strong>Acci√≥n:</strong></p>
            <ol>
                <li>Usuario abre m√≥dulo Productos</li>
                <li>Click en [+ Crear producto]</li>
                <li>Completa formulario:
                    <ul>
                        <li>Nombre: "Pack Limpieza Hogar Completo"</li>
                        <li>Proveedor: (vac√≠o - es combo)</li>
                        <li>Precio L1: $18.000</li>
                        <li>Stock actual: 20</li>
                        <li>Stock m√≠nimo: 5</li>
                        <li>Peso: 8.0 kg</li>
                        <li>Disponible: ON</li>
                        <li>En promoci√≥n: ON</li>
                        <li>Precio promocional: $15.000</li>
                    </ul>
                </li>
                <li>Click [Guardar]</li>
            </ol>
            <p><strong>Resultado:</strong></p>
            <ul>
                <li>‚úÖ Combo creado como producto promocional</li>
                <li>‚úÖ Se vende siempre a $15.000 sin importar lista</li>
                <li>‚úÖ Badge üè∑ en tabla indica promoci√≥n</li>
                <li>‚úÖ NO entra en c√°lculo de umbral de descuento autom√°tico</li>
            </ul>

            <h3>Caso 3: Reordenar productos con drag & drop</h3>
            <p><strong>Contexto:</strong> Administrador quiere priorizar productos frecuentes en buscador</p>
            <p><strong>Acci√≥n:</strong></p>
            <ol>
                <li>Usuario abre m√≥dulo Productos</li>
                <li>Identifica producto frecuente (ej: "Detergente X" en posici√≥n #15)</li>
                <li>Arrastra icono ‚ãÆ‚ãÆ del producto</li>
                <li>Suelta en posici√≥n #1</li>
            </ol>
            <p><strong>Resultado:</strong></p>
            <ul>
                <li>‚úÖ "Detergente X" ahora es #1</li>
                <li>‚úÖ Productos anteriores bajan una posici√≥n</li>
                <li>‚úÖ N√∫meros de orden se recalculan autom√°ticamente</li>
                <li>‚úÖ En cotizador, "Detergente X" aparece primero en b√∫squedas</li>
            </ul>

            <h3>Caso 4: Ajustar stock por producci√≥n</h3>
            <p><strong>Contexto:</strong> Lleg√≥ producci√≥n nueva de un producto</p>
            <p><strong>Acci√≥n:</strong></p>
            <ol>
                <li>Usuario busca producto "Lavandina 2L"</li>
                <li>Click en [Ajustar Stock]</li>
                <li>Selecciona: Ingreso (+)</li>
                <li>Cantidad: 100</li>
                <li>Motivo: "Producci√≥n lote #245"</li>
                <li>Click [Guardar]</li>
            </ol>
            <p><strong>Resultado:</strong></p>
            <ul>
                <li>‚úÖ Stock aumentado en 100 unidades</li>
                <li>‚úÖ Movimiento registrado en historial</li>
                <li>‚úÖ Notificaci√≥n: "Stock actualizado correctamente"</li>
            </ul>

            <h3>Caso 5: Desactivar producto descontinuado</h3>
            <p><strong>Contexto:</strong> Producto descontinuado que ya no se vende</p>
            <p><strong>Acci√≥n:</strong></p>
            <ol>
                <li>Usuario busca producto "Producto Viejo"</li>
                <li>Click en [Editar]</li>
                <li>Cambia switch "Disponible" a OFF</li>
                <li>Click [Guardar]</li>
            </ol>
            <p><strong>Resultado:</strong></p>
            <ul>
                <li>‚úÖ Producto marcado como "No disponible"</li>
                <li>‚ùå Ya NO aparece en buscador del cotizador</li>
                <li>‚úÖ Pedidos hist√≥ricos que lo contienen NO se afectan</li>
                <li>‚úÖ Permanece en sistema para consultas</li>
                <li>‚úÖ Reversible (se puede volver a activar)</li>
            </ul>

            <h3>Caso 6: Exportar inventario por proveedor</h3>
            <p><strong>Contexto:</strong> Administrador necesita reporte de stock de un proveedor espec√≠fico</p>
            <p><strong>Acci√≥n:</strong></p>
            <ol>
                <li>Usuario abre m√≥dulo Productos</li>
                <li>Click en [Exportar Excel]</li>
                <li>Selecciona proveedor: "Proveedor A"</li>
                <li>Vista previa: "15 productos seleccionados"</li>
                <li>Click [Descargar Excel]</li>
            </ol>
            <p><strong>Resultado:</strong></p>
            <ul>
                <li>‚úÖ Descarga archivo <code>inventario_bambu_2024-12-31.xlsx</code></li>
                <li>‚úÖ Contiene solo productos de "Proveedor A"</li>
                <li>‚úÖ Columnas: Nombre | Proveedor | Stock Actual | Stock M√≠nimo | Precio L1</li>
            </ul>
        </section>

        <!-- SECCI√ìN 7: FLUJOS DE USUARIO -->
        <section id="flujos">
            <h2>7. Flujos de Usuario</h2>

            <h3>7.1 Flujo principal: Gesti√≥n de producto</h3>
            <pre><code>Usuario accede a m√≥dulo Productos
        ‚Üì
Vista tabla completa de productos
        ‚Üì
Aplica filtros (opcional)
‚îú‚îÄ Por proveedor
‚îú‚îÄ Por disponibilidad
‚îú‚îÄ Solo promocionales
‚îî‚îÄ B√∫squeda por nombre
        ‚Üì
Selecciona acci√≥n:
‚îú‚îÄ [+ Crear producto] ‚Üí Modal crear ‚Üí Guardar ‚Üí Producto agregado al final
‚îú‚îÄ [Editar] ‚Üí Modal editar ‚Üí Guardar ‚Üí Producto actualizado
‚îú‚îÄ [Ajustar Stock] ‚Üí Modal ajustar ‚Üí Guardar ‚Üí Stock actualizado
‚îú‚îÄ Drag & drop ‚Üí Reordenar ‚Üí Orden actualizado autom√°ticamente
‚îú‚îÄ [Eliminar] ‚Üí Confirmaci√≥n ‚Üí Producto eliminado (si no tiene pedidos)
‚îî‚îÄ [Exportar Excel] ‚Üí Seleccionar proveedor ‚Üí Descargar archivo</code></pre>

            <h3>7.2 Flujo alternativo: Crear combo promocional</h3>
            <pre><code>Usuario accede a m√≥dulo Productos
        ‚Üì
Click [+ Crear producto]
        ‚Üì
Completa campos b√°sicos:
- Nombre del combo
- Precio base L1
- Stock inicial
        ‚Üì
Activa switch "En promoci√≥n"
        ‚Üì
Campo "Precio promocional" se habilita
        ‚Üì
Ingresa precio fijo del combo
        ‚Üì
Completa resto de campos
        ‚Üì
Click [Guardar]
        ‚Üì
Sistema valida:
- Precio promocional < Precio L1 ‚úì
- Nombre √∫nico ‚úì
        ‚Üì
Combo creado como producto promocional
        ‚Üì
Badge üè∑ visible en tabla
        ‚Üì
Disponible en cotizador con precio fijo</code></pre>

            <h3>7.3 Flujo: Desactivar producto sin eliminar</h3>
            <pre><code>Usuario identifica producto descontinuado
        ‚Üì
Click [Editar]
        ‚Üì
Cambia switch "Disponible" a OFF
        ‚Üì
Click [Guardar]
        ‚Üì
Sistema actualiza:
- Badge gris "No disponible" en tabla
- Producto oculto en buscador cotizador
- Pedidos hist√≥ricos NO afectados
        ‚Üì
Producto permanece en sistema para consulta
        ‚Üì
(Reversible: puede volver a activarse)</code></pre>

            <h3>7.4 Flujo: Reordenar productos drag & drop</h3>
            <pre><code>Usuario abre m√≥dulo Productos
        ‚Üì
Identifica producto a priorizar
        ‚Üì
Hover sobre icono ‚ãÆ‚ãÆ (cursor cambia a "mano")
        ‚Üì
Click y mantener presionado
        ‚Üì
Arrastra producto hacia arriba/abajo
        ‚Üì
Suelta en nueva posici√≥n
        ‚Üì
Sistema recalcula orden autom√°ticamente:
- Producto movido toma nueva posici√≥n
- Productos intermedios se ajustan
- N√∫meros de orden se actualizan
        ‚Üì
Orden guardado autom√°ticamente
        ‚Üì
Impacta en buscador del cotizador inmediatamente</code></pre>
        </section>

        <!-- SECCI√ìN 8: NOTAS T√âCNICAS -->
        <section id="notas-tecnicas">
            <h2>8. Notas T√©cnicas para Desarrollo</h2>

            <h3>8.1 Estructura de datos (Mock data)</h3>
            <pre><code class="language-javascript">// Ejemplo de estructura para prototipos
const PRODUCTO_EJEMPLO = {
    id: 1,
    nombre: "Detergente Concentrado 5L",
    proveedor_id: 2, // Relaci√≥n con tabla proveedores
    proveedor_nombre: "Proveedor A", // Para facilitar mockeo
    precio_l1: 8500, // Precio base lista 1
    precio_l2: 7968.75, // Calculado: L1 * 0.9375 (6.25% desc)
    precio_l3: 7650, // Calculado: L1 * 0.90 (10% desc)
    stock_actual: 120,
    stock_minimo: 20,
    peso_kg: 5.2,
    orden: 1, // Orden de aparici√≥n (editable drag & drop)
    disponible: true, // true = aparece en cotizador
    en_promocion: false,
    precio_promocional: null, // Solo si en_promocion = true
    created_at: "2024-01-15",
    updated_at: "2024-12-30"
};

// Ejemplo de combo/pack (producto promocional)
const COMBO_EJEMPLO = {
    id: 15,
    nombre: "Pack Limpieza Hogar Completo",
    proveedor_id: null, // Combos pueden no tener proveedor
    proveedor_nombre: "-",
    precio_l1: 18000, // Precio "normal" (referencia)
    precio_l2: 18000, // Ignorado si en_promocion = true
    precio_l3: 18000, // Ignorado si en_promocion = true
    stock_actual: 20,
    stock_minimo: 5,
    peso_kg: 8.0,
    orden: 15,
    disponible: true,
    en_promocion: true, // ‚Üê Activa precio fijo
    precio_promocional: 15000, // ‚Üê Precio fijo que se usa
    created_at: "2024-06-20",
    updated_at: "2024-12-28"
};

// Ejemplo de movimiento de stock
const MOVIMIENTO_STOCK = {
    id: 245,
    producto_id: 1,
    tipo: "INGRESO", // INGRESO | EGRESO | AJUSTE
    cantidad: 100,
    motivo: "Producci√≥n lote #245",
    pedido_id: null, // null si es manual, ID si es autom√°tico
    stock_resultante: 220,
    usuario_id: 1,
    created_at: "2024-12-30 14:30:00"
};
</code></pre>

            <h3>8.2 Consideraciones de implementaci√≥n</h3>
            <ul>
                <li>‚ö†Ô∏è <strong>Drag & drop:</strong> Usar librer√≠as como SortableJS (vanilla) o similar para implementar reordenamiento visual</li>
                <li>‚ö†Ô∏è <strong>Persistencia de filtros:</strong> Usar <code>localStorage</code> para guardar estado de filtros entre sesiones</li>
                <li>‚ö†Ô∏è <strong>Validaci√≥n √∫nica de nombre:</strong> Implementar verificaci√≥n en tiempo real (al escribir) para evitar duplicados</li>
                <li>‚ö†Ô∏è <strong>Stock negativo:</strong> Permitido a nivel de base de datos (sin restricci√≥n CHECK > 0)</li>
                <li>‚ö†Ô∏è <strong>Alertas de stock bajo:</strong> Query: <code>WHERE stock_actual < stock_minimo</code></li>
                <li>üí° <strong>Optimizaci√≥n:</strong> Cachear lista de proveedores para dropdown (no cambiar frecuentemente)</li>
                <li>üí° <strong>Auditor√≠a:</strong> Registrar usuario y timestamp en cada modificaci√≥n de producto o stock</li>
                <li>üí° <strong>Exportaci√≥n Excel:</strong> Usar librer√≠as como SheetJS (xlsx) para generar archivos</li>
            </ul>

            <h3>8.3 Queries SQL √∫tiles</h3>
            <pre><code class="language-sql">-- Obtener productos con stock bajo
SELECT * FROM productos
WHERE stock_actual < stock_minimo
AND disponible = true
ORDER BY stock_actual ASC;

-- Obtener productos de un proveedor espec√≠fico
SELECT * FROM productos
WHERE proveedor_id = ?
ORDER BY orden ASC;

-- Obtener productos disponibles ordenados para cotizador
SELECT * FROM productos
WHERE disponible = true
ORDER BY orden ASC;

-- Calcular total de movimientos de stock por producto
SELECT
    p.nombre,
    COUNT(m.id) as total_movimientos,
    SUM(CASE WHEN m.tipo = 'INGRESO' THEN m.cantidad ELSE 0 END) as total_ingresos,
    SUM(CASE WHEN m.tipo = 'EGRESO' THEN m.cantidad ELSE 0 END) as total_egresos
FROM productos p
LEFT JOIN movimientos_stock m ON p.id = m.producto_id
GROUP BY p.id
ORDER BY p.nombre;</code></pre>

            <h3>8.4 Estructura de base de datos sugerida</h3>
            <pre><code class="language-sql">CREATE TABLE productos (
    id SERIAL PRIMARY KEY,
    nombre VARCHAR(255) UNIQUE NOT NULL,
    proveedor_id INT REFERENCES proveedores(id) ON DELETE SET NULL,
    precio_l1 DECIMAL(10,2) NOT NULL,
    stock_actual INT NOT NULL DEFAULT 0, -- Puede ser negativo
    stock_minimo INT NOT NULL DEFAULT 0,
    peso_kg DECIMAL(8,2) NOT NULL,
    orden INT NOT NULL DEFAULT 9999,
    disponible BOOLEAN NOT NULL DEFAULT true,
    en_promocion BOOLEAN NOT NULL DEFAULT false,
    precio_promocional DECIMAL(10,2),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE movimientos_stock (
    id SERIAL PRIMARY KEY,
    producto_id INT NOT NULL REFERENCES productos(id) ON DELETE CASCADE,
    tipo VARCHAR(20) NOT NULL, -- INGRESO | EGRESO | AJUSTE
    cantidad INT NOT NULL,
    motivo TEXT,
    pedido_id INT REFERENCES pedidos(id) ON DELETE SET NULL,
    stock_resultante INT NOT NULL,
    usuario_id INT REFERENCES usuarios(id) ON DELETE SET NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);</code></pre>
        </section>

        <!-- PIE DE P√ÅGINA -->
        <footer>
            <p>Bambu CRM V2 - PRD T√©cnico | √öltima actualizaci√≥n: 31 Diciembre 2024</p>
            <p><a href="index.html">‚Üê Volver al PRD General</a></p>
        </footer>
    </main>

    <!-- SCRIPT PARA TOC AUTO -->
    <script>
        // Auto-generar tabla de contenidos desde los h2
        const toc = document.getElementById('toc');
        const h2s = document.querySelectorAll('main h2');
        h2s.forEach(h2 => {
            const li = document.createElement('li');
            const a = document.createElement('a');
            a.href = '#' + h2.parentElement.id;
            a.textContent = h2.textContent;
            a.className = 'nav-link';
            li.appendChild(a);
            toc.appendChild(li);
        });

        // Mobile menu toggle
        document.querySelector('.mobile-menu-toggle')?.addEventListener('click', () => {
            document.getElementById('sidebar').classList.toggle('open');
        });
    </script>
</body>

</html>
