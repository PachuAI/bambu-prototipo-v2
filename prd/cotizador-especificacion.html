<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bambu CRM v2 - MÃ³dulo Cotizador</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="assets/styles.css">
</head>

<body>

    <button class="mobile-menu-toggle" onclick="document.getElementById('sidebar').classList.toggle('open')">â˜°
        MenÃº</button>

    <nav id="sidebar">
        <div class="logo">
            <span>â—†</span> Bambu CRM v2
        </div>

        <div class="nav-group">
            <div class="nav-header">DocumentaciÃ³n</div>
            <a href="index.html" class="nav-link">â† Volver al PRD</a>
        </div>

        <div class="nav-group">
            <div class="nav-header">Ãndice</div>
            <a href="#contexto-general" class="nav-link">1. Contexto General</a>
            <a href="#arquitectura-visual" class="nav-link">2. Arquitectura Visual</a>
            <a href="#comportamiento-general" class="nav-link">3. Comportamiento General</a>
            <a href="#switch-fabrica-reparto" class="nav-link">4. Switch FÃBRICA / REPARTO</a>
            <a href="#buscador-de-productos" class="nav-link">5. Buscador de Productos</a>
            <a href="#selector-de-cliente" class="nav-link">6. Selector de Cliente</a>
            <a href="#lista-de-productos-agregados" class="nav-link">7. Lista de Productos</a>
            <a href="#panel-lateral-resumen-y-totales" class="nav-link">8. Panel Lateral</a>
            <a href="#configuracion-de-precios-y-descuentos" class="nav-link">9. Precios y Descuentos</a>
            <a href="#ajustes-y-notas" class="nav-link">10. Ajustes y Notas</a>
            <a href="#totales-y-confirmacion" class="nav-link">11. Totales y ConfirmaciÃ³n</a>
            <a href="#flujos-completos" class="nav-link">12. Flujos Completos</a>
            <a href="#validaciones-y-reglas-de-negocio" class="nav-link">13. Validaciones</a>
            <a href="#estados-y-transiciones" class="nav-link">14. Estados y Transiciones</a>
            <a href="#integraciones-con-otros-modulos" class="nav-link">15. Integraciones</a>
            <a href="#atajos-de-teclado" class="nav-link">16. Atajos</a>
            <a href="#casos-de-uso-detallados" class="nav-link">17. Casos de Uso</a>
            <a href="#especificaciones-tecnicas-ui-ux" class="nav-link">18. UI/UX</a>
        </div>
    </nav>

    <main>
        <header>
            <div
                style="margin-bottom: 1rem; font-size: 0.9rem; color: var(--text-secondary); text-transform: uppercase;">
                QuÃ­mica Bambu S.R.L.</div>
            <h1>Bambu CRM v2 <br><span style="font-weight: 300; font-size: 1.5rem; color: var(--text-secondary);">MÃ³dulo
                    Cotizador - EspecificaciÃ³n Completa</span></h1>

            <table>
                <tr>
                    <td style="width: 150px;"><strong>Fecha</strong></td>
                    <td>27 de Diciembre 2025</td>
                </tr>
                <tr>
                    <td><strong>Sistema</strong></td>
                    <td>Bambu CRM v2</td>
                </tr>
                <tr>
                    <td><strong>PropÃ³sito</strong></td>
                    <td>EspecificaciÃ³n exhaustiva del mÃ³dulo Cotizador para generaciÃ³n de HTML</td>
                </tr>
                <tr>
                    <td><strong>Estado</strong></td>
                    <td>Documento tÃ©cnico completo para desarrollo</td>
                </tr>
            </table>
        </header>

        <section id="contexto-general">
            <h2>1. CONTEXTO GENERAL</h2>

            <h3>1.1 DescripciÃ³n</h3>
            <p>El <strong>Cotizador</strong> es el mÃ³dulo central del sistema Bambu CRM v2 para crear pedidos. Ha sido
                completamente rediseÃ±ado para optimizar el tiempo de cotizaciÃ³n y maximizar la eficiencia operativa.</p>

            <h3>1.2 Objetivos del rediseÃ±o</h3>
            <ul>
                <li>âœ… Reducir tiempo de cotizaciÃ³n de ~2 minutos a ~30 segundos</li>
                <li>âœ… Aprovechar mÃ¡ximo espacio en pantalla (diseÃ±o compacto)</li>
                <li>âœ… Flujo continuo: al terminar una cotizaciÃ³n, volver automÃ¡ticamente a "nueva cotizaciÃ³n"</li>
                <li>âœ… Eliminar elementos innecesarios (tÃ­tulo "Cotizador Bambu", etc.)</li>
                <li>âœ… Optimizar navegaciÃ³n con teclado (atajos: Shift+4, F4)</li>
                <li>âœ… Simplificar jerarquÃ­a de descuentos</li>
            </ul>

            <h3>1.3 PosiciÃ³n en el sistema</h3>
            <ul>
                <li><strong>Acceso</strong>: BotÃ³n superior del dashboard o sidebar "COTIZADOR"</li>
                <li><strong>Visibilidad</strong>: Collapsa el menÃº lateral izquierdo al abrir para aprovechar espacio
                    completo</li>
                <li><strong>Cierre</strong>: Vuelve al dashboard (con advertencia si hay cambios sin guardar)</li>
            </ul>
        </section>

        <section id="arquitectura-visual">
            <h2>2. ARQUITECTURA VISUAL</h2>

            <h3>2.1 Layout general</h3>
            <pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [&lt;] [ğŸšš Reparto] [ğŸ­ FÃ¡brica]  [ğŸ” Buscar productos...]  [ğŸ‘¤ Cliente â–¼]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                â”‚  PANEL LATERAL DERECHO    â”‚
â”‚  TABLA PRODUCTOS AGREGADOS                     â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚ Subtotal: $8,315    â”‚ â”‚
â”‚  â”‚ PRODUCTO | SUBTOTAL | UNIT. | CANT. | ğŸ—‘ â”‚  â”‚  â”‚ ğŸ“¦ Entrega: 12/27/25â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚  â”‚ âš–ï¸ Peso: 7.20kg      â”‚ â”‚
â”‚  â”‚ Granel detergente                        â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”‚ GRA-015                                  â”‚  â”‚                           â”‚
â”‚  â”‚         $915      $915    [-] 1 [+]   ğŸ—‘ â”‚  â”‚  â˜ L1: 0.00% (Base)      â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚  â˜ L2: 6.25% (>$250k)    â”‚
â”‚  â”‚ Detergente tipo magistral x1 lt          â”‚  â”‚  â˜ L3: 10.00% (>$1M)     â”‚
â”‚  â”‚ PRD-018                                  â”‚  â”‚  [% Aplicar L2] [% L3]   â”‚
â”‚  â”‚        $1,600    $1,600   [-] 1 [+]   ğŸ—‘ â”‚  â”‚                           â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚  Desc. Manual (%): [0]   â”‚
â”‚  â”‚ Detergente tipo magistral x5 lts         â”‚  â”‚  Ajuste ($): [0]         â”‚
â”‚  â”‚ ACC-017                                  â”‚  â”‚  ğŸ“ Agregar nota         â”‚
â”‚  â”‚        $5,800    $5,800   [-] 1 [+]   ğŸ—‘ â”‚  â”‚                           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  TOTAL FINAL             â”‚
â”‚                                                â”‚  $8,315                   â”‚
â”‚                                                â”‚                           â”‚
â”‚                                                â”‚  [ğŸ“„ Generar Resumen]     â”‚
â”‚                                                â”‚  [ğŸ’¾ Guardar Borrador]    â”‚
â”‚                                                â”‚  [âœ… Confirmar Pedido]    â”‚
â”‚                                                â”‚     Agencias entrega      â”‚
â”‚                                                â”‚                           â”‚
â”‚                                                â”‚  âŒ¨ï¸ Shift+4 Â· F4 Resumen â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>

            <p><strong>Modo FÃBRICA (con mÃ©todo de pago visible):</strong> â­ NUEVO</p>
            <pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [&lt;] [ğŸšš Reparto] [ğŸ­ FÃ¡brica]âœ“  [ğŸ” Buscar productos...]  [ğŸ‘¤ Cliente â–¼]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                â”‚  PANEL LATERAL DERECHO    â”‚
â”‚  TABLA PRODUCTOS AGREGADOS                     â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚ Subtotal: $8,315    â”‚ â”‚
â”‚  â”‚ PRODUCTO | SUBTOTAL | UNIT. | CANT. | ğŸ—‘ â”‚  â”‚  â”‚ âš–ï¸ Peso: 7.20kg      â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”‚ Granel detergente                        â”‚  â”‚                           â”‚
â”‚  â”‚ GRA-015                                  â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚         $915      $915    [-] 1 [+]   ğŸ—‘ â”‚  â”‚ â”‚ MÃ‰TODO DE PAGO â­   â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚ â”‚ â˜ Efectivo          â”‚ â”‚
â”‚  â”‚ Detergente x1 lt                         â”‚  â”‚ â”‚ â˜ Digital           â”‚ â”‚
â”‚  â”‚ PRD-018                                  â”‚  â”‚ â”‚ Monto: [$8,315]     â”‚ â”‚
â”‚  â”‚        $1,600    $1,600   [-] 1 [+]   ğŸ—‘ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚                           â”‚
â”‚  â”‚ Detergente x5 lts                        â”‚  â”‚  â˜ L1: 0.00% (Base)      â”‚
â”‚  â”‚ ACC-017                                  â”‚  â”‚  â˜ L2: 6.25% (>$250k)    â”‚
â”‚  â”‚        $5,800    $5,800   [-] 1 [+]   ğŸ—‘ â”‚  â”‚  [% Aplicar L2] [% L3]   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                           â”‚
â”‚                                                â”‚  Desc. Manual (%): [0]   â”‚
â”‚                                                â”‚  Ajuste ($): [0]         â”‚
â”‚                                                â”‚  ğŸ“ Agregar nota         â”‚
â”‚                                                â”‚                           â”‚
â”‚                                                â”‚  TOTAL FINAL             â”‚
â”‚                                                â”‚  $8,315                   â”‚
â”‚                                                â”‚                           â”‚
â”‚                                                â”‚  [ğŸ“„ Generar Resumen]     â”‚
â”‚                                                â”‚  [ğŸ’¾ Guardar Borrador]    â”‚
â”‚                                                â”‚  [âœ… Confirmar Pedido]    â”‚
â”‚                                                â”‚     Agencias entrega      â”‚
â”‚                                                â”‚                           â”‚
â”‚                                                â”‚  âŒ¨ï¸ Shift+4 Â· F4 Resumen â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>

            <h3>2.2 DistribuciÃ³n de espacios</h3>
            <p><strong>Pantalla completa dividida en 2 columnas:</strong></p>
            <ol>
                <li><strong>Columna izquierda (70% ancho)</strong>:
                    <ul>
                        <li>Header (switch + buscador + cliente)</li>
                        <li>Tabla de productos agregados</li>
                    </ul>
                </li>
                <li><strong>Columna derecha (30% ancho)</strong>:
                    <ul>
                        <li>Panel lateral fijo con scroll independiente</li>
                        <li>Resumen, descuentos, totales y botones de acciÃ³n</li>
                    </ul>
                </li>
            </ol>

            <h3>2.3 Sidebar lateral del sistema</h3>
            <ul>
                <li><strong>Estado al abrir cotizador</strong>: Colapsado automÃ¡ticamente</li>
                <li><strong>Ãtem activo</strong>: "COTIZADOR" (resaltado en verde)</li>
                <li><strong>Logo</strong>: BambÃº CRM (parte superior)</li>
                <li><strong>ConfiguraciÃ³n</strong>: Parte inferior</li>
            </ul>
        </section>

        <section id="comportamiento-general">
            <h2>3. COMPORTAMIENTO GENERAL</h2>

            <h3>3.1 Apertura del cotizador</h3>
            <p><strong>Trigger</strong>: Click en botÃ³n "COTIZADOR" (sidebar o header)</p>
            <p><strong>Acciones automÃ¡ticas:</strong></p>
            <ol>
                <li>Colapsa el menÃº lateral izquierdo</li>
                <li>Carga vista limpia (sin productos, sin cliente, modo REPARTO por defecto)</li>
                <li>Focus automÃ¡tico en campo "Buscar productos"</li>
                <li>Estado inicial: Borrador vacÃ­o</li>
            </ol>

            <h3>3.2 Flujo continuo</h3>
            <p><strong>Al confirmar un pedido:</strong></p>
            <ul>
                <li>âœ… Muestra mensaje de Ã©xito (toast notification)</li>
                <li>âœ… Limpia automÃ¡ticamente todos los campos</li>
                <li>âœ… Vuelve a estado "nueva cotizaciÃ³n"</li>
                <li>âœ… Focus en buscador de productos</li>
                <li>âœ… <strong>NO cierra el cotizador</strong> â†’ Listo para siguiente pedido</li>
            </ul>

            <h3>3.3 Cierre del cotizador</h3>
            <p><strong>Casos:</strong></p>
            <ol>
                <li><strong>Con cambios sin guardar:</strong>
                    <pre><code>âš ï¸ Â¿EstÃ¡s seguro?
Se perderÃ¡n los cambios no guardados

[Cancelar] [SÃ­, salir]</code></pre>
                    <ul>
                        <li>Si confirma: pierde todo (no hay guardado automÃ¡tico)</li>
                        <li>Si cancela: permanece en cotizador</li>
                    </ul>
                </li>
                <li><strong>Sin cambios:</strong>
                    <ul>
                        <li>Cierra directo sin advertencia</li>
                        <li>Vuelve al dashboard</li>
                    </ul>
                </li>
            </ol>

            <h3>3.4 Orden de elementos en pantalla (top â†’ bottom)</h3>
            <ol>
                <li><strong>Switch FÃBRICA / REPARTO</strong></li>
                <li><strong>Buscador de productos</strong></li>
                <li><strong>Selector de cliente</strong> (opcional)</li>
                <li><strong>Lista de productos agregados al pedido</strong></li>
                <li><strong>Panel lateral derecho</strong> (siempre visible):
                    <ul>
                        <li>Resumen (subtotal, fecha, peso)</li>
                        <li>Listas de precio</li>
                        <li>Descuento manual</li>
                        <li>Ajuste de monto</li>
                        <li>Notas</li>
                        <li>Total final</li>
                        <li>Botones de acciÃ³n</li>
                    </ul>
                </li>
            </ol>
        </section>

        <section id="switch-fabrica-reparto">
            <h2>4. SWITCH FÃBRICA / REPARTO</h2>

            <h3>4.1 UbicaciÃ³n</h3>
            <p><strong>Parte superior izquierda del cotizador</strong> (primer elemento visible)</p>

            <h3>4.2 DiseÃ±o</h3>
            <pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [ğŸšš Reparto] [ğŸ­ FÃ¡brica]        â”‚  â† Toggle horizontal
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Estado activo: Fondo color naranja (Reparto) o azul (FÃ¡brica)
Estado inactivo: Fondo gris claro</code></pre>

            <h3>4.3 Comportamiento</h3>
            <p><strong>Regla crÃ­tica</strong>: Cambiar el switch <strong>NO reinicia los productos cargados</strong>,
                solo determina el estado final del pedido.</p>

            <h4>4.3.1 Modo FÃBRICA</h4>
            <p><strong>Ãcono</strong>: ğŸ­<br>
                <strong>Color</strong>: Azul<br>
                <strong>Uso</strong>: Ventas directas donde el cliente retira en el momento
            </p>

            <p><strong>Efectos al confirmar:</strong></p>
            <ul>
                <li>Estado del pedido: <code>"entregado"</code> (directo)</li>
                <li>Stock: Se descuenta inmediatamente</li>
                <li>Fecha del pedido: Fecha actual (timestamp del sistema)</li>
                <li>Cuenta corriente: Si tiene cliente â†’ genera cargo automÃ¡tico</li>
                <li><strong>NO abre calendario</strong> (no hay fecha de entrega futura)</li>
            </ul>

            <p><strong>Flujo:</strong></p>
            <pre><code>Modo FÃBRICA â†’ Confirmar pedido
       â†“
Estado: "Entregado"
Stock: Descontado
Fecha: Hoy
       â†“
Aparece en mÃ³dulo VENTAS (filtro: Entregado)</code></pre>

            <h4>4.3.2 Modo REPARTO</h4>
            <p><strong>Ãcono</strong>: ğŸšš<br>
                <strong>Color</strong>: Naranja<br>
                <strong>Uso</strong>: Pedidos que serÃ¡n entregados posteriormente
            </p>

            <p><strong>Efectos al confirmar:</strong></p>
            <ol>
                <li><strong>Abre calendario modal</strong> para elegir fecha de entrega</li>
                <li>Calendario restringido: <strong>Solo lunes a viernes</strong></li>
                <li>Si NO selecciona fecha â†’ asigna fecha actual</li>
                <li>Estado del pedido: <code>"en trÃ¡nsito"</code> con fecha asignada</li>
                <li>Stock: Se descuenta inmediatamente</li>
                <li>Cuenta corriente: Si tiene cliente â†’ genera cargo automÃ¡tico</li>
            </ol>

            <p><strong>Flujo:</strong></p>
            <pre><code>Modo REPARTO â†’ Confirmar pedido
       â†“
Modal calendario (L-V solamente)
Selecciona: 27/12/2025
       â†“
Estado: "En trÃ¡nsito"
Fecha asignada: 27/12/2025
Stock: Descontado
       â†“
Aparece en mÃ³dulo VENTAS:
  - Tab "Lista Pedidos" â†’ Filtro: En trÃ¡nsito âœ…
  - Tab "Calendario Semana" â†’ DÃ­a 27/12 âœ…</code></pre>

            <h3>4.4 Cambio de modo durante ediciÃ³n</h3>
            <p><strong>Ejemplo:</strong></p>
            <pre><code>Usuario carga 3 productos â†’ Selecciona FÃBRICA â†’ Cambia a REPARTO

Resultado:
âœ… Los 3 productos permanecen cargados
âœ… Solo cambia el comportamiento al confirmar</code></pre>
        </section>

        <section id="buscador-de-productos">
            <h2>5. BUSCADOR DE PRODUCTOS</h2>

            <h3>5.1 UbicaciÃ³n</h3>
            <p><strong>Header del cotizador</strong>, justo despuÃ©s del switch FÃBRICA/REPARTO</p>

            <h3>5.2 DiseÃ±o</h3>
            <pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ”  Buscar productos (nombre)...                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>

            <p><strong>CaracterÃ­sticas visuales:</strong></p>
            <ul>
                <li>Campo de texto ancho (ocupa ~50% del header)</li>
                <li>Placeholder: "Buscar productos (nombre)..."</li>
                <li>Ãcono de lupa (ğŸ”) a la izquierda</li>
                <li>Auto-focus al abrir cotizador</li>
            </ul>

            <h3>5.3 Comportamiento de bÃºsqueda</h3>

            <h4>5.3.1 BÃºsqueda predictiva</h4>
            <p><strong>Trigger</strong>: Usuario escribe mÃ­nimo 2 caracteres</p>

            <p><strong>Resultados:</strong></p>
            <ul>
                <li>Aparecen en dropdown debajo del campo</li>
                <li>BÃºsqueda por: Nombre del producto (case-insensitive)</li>
                <li>Ordenamiento: Respeta campo <code>orden</code> de productos (menor nÃºmero = mayor prioridad)</li>
                <li>Formato compacto: 1 lÃ­nea por producto</li>
            </ul>

            <p><strong>Ejemplo de resultado:</strong></p>
            <pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ”  deter                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Granel detergente Â· GRA-015 Â· $915 Â· Stock: 150     â”‚
â”‚ Detergente tipo magistral x1 lt Â· PRD-018 Â· $1,600  â”‚
â”‚ Detergente tipo magistral x5 lts Â· ACC-017 Â· $5,800 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>

            <p><strong>InformaciÃ³n mostrada por producto (en 1 lÃ­nea):</strong></p>
            <ul>
                <li>Nombre del producto</li>
                <li>Precio (lista actual aplicada)</li>
                <li>Stock disponible</li>
                <li><strong>NO se muestra</strong>: DescripciÃ³n larga, categorÃ­a</li>
            </ul>

            <h4>5.3.2 Orden de resultados</h4>
            <p><strong>Regla</strong>: Usa campo <code>orden</code> de la tabla productos</p>

            <p><strong>Ejemplo:</strong></p>
            <pre><code>SELECT * FROM productos
WHERE nombre LIKE '%deter%'
  AND disponible = true
ORDER BY orden ASC, nombre ASC
LIMIT 10</code></pre>

            <p><strong>Campo <code>orden</code>:</strong></p>
            <ul>
                <li>Asignado manualmente por administrador</li>
                <li>Menor nÃºmero = Mayor prioridad</li>
                <li>Ejemplo: Producto estrella <code>orden = 1</code>, productos secundarios <code>orden = 10</code>
                </li>
            </ul>

            <h4>5.3.3 Productos excluidos</h4>
            <p><strong>NO aparecen en buscador:</strong></p>
            <ul>
                <li>Productos con <code>disponible = false</code></li>
                <li>Productos eliminados (soft delete)</li>
            </ul>

            <p><strong>SÃ aparecen aunque tengan stock = 0:</strong></p>
            <ul>
                <li>Productos BAMBU (proveedor propio) â†’ siempre se pueden vender</li>
                <li>Productos de otros proveedores â†’ depende de configuraciÃ³n (ver secciÃ³n 5.5)</li>
            </ul>

            <h3>5.4 Agregar productos</h3>

            <h4>5.4.1 MÃ©todos de agregado</h4>
            <p><strong>OpciÃ³n 1: Click en resultado</strong></p>
            <ul>
                <li>Usuario hace click en un producto del dropdown</li>
                <li>Se agrega con cantidad = 1</li>
                <li>Dropdown se cierra</li>
                <li>Campo de bÃºsqueda se limpia</li>
                <li>Focus vuelve al buscador (para continuar agregando)</li>
            </ul>

            <p><strong>OpciÃ³n 2: Enter en resultado seleccionado</strong></p>
            <ul>
                <li>Usuario navega con flechas â†‘â†“ por resultados</li>
                <li>Presiona Enter</li>
                <li>Se agrega producto seleccionado con cantidad = 1</li>
            </ul>

            <p><strong>OpciÃ³n 3: Botones +/- en dropdown</strong></p>
            <ul>
                <li>Cada resultado tiene botones <code>[-] 1 [+]</code> inline</li>
                <li>Usuario puede incrementar cantidad antes de agregar</li>
                <li>Click en <code>[+]</code> â†’ agrega producto con cantidad actual</li>
            </ul>

            <h4>5.4.2 Producto ya agregado</h4>
            <p><strong>Regla</strong>: Si un producto ya estÃ¡ en la lista y se vuelve a agregar â†’ <strong>la cantidad se
                    suma automÃ¡ticamente</strong></p>

            <p><strong>Ejemplo:</strong></p>
            <pre><code>Estado actual:
- Granel detergente x 2

Usuario busca "Granel" y lo agrega de nuevo:

Resultado:
- Granel detergente x 3  â† Cantidad sumada

NO se crea lÃ­nea duplicada
NO se muestra advertencia "Ya estÃ¡ agregado"</code></pre>

            <h3>5.5 Comportamiento con stock insuficiente</h3>
            <p><strong>Configurable desde panel de administraciÃ³n</strong> (boolean global)</p>

            <h4>5.5.1 OpciÃ³n 1 - Modo FLEXIBLE (recomendado)</h4>
            <pre><code>Producto: Detergente X
Stock disponible: 5
Usuario intenta agregar: 10

Resultado:
âœ… Se permite agregar
âš ï¸ Advertencia visual (badge naranja): "Stock bajo (5 disponibles)"</code></pre>

            <p><strong>DiseÃ±o de advertencia:</strong></p>
            <pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Detergente tipo magistral x1 lt Â· PRD-018            â”‚
â”‚ âš ï¸ Stock bajo (5 disponibles) Â· $1,600               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>

            <h4>5.5.2 OpciÃ³n 2 - Modo ESTRICTO</h4>
            <pre><code>Producto: Detergente X
Stock disponible: 5
Usuario intenta agregar: 10

Resultado:
âŒ Bloquea el agregado
âŒ BotÃ³n [+] deshabilitado al llegar al lÃ­mite
â„¹ï¸ Tooltip: "Stock insuficiente (mÃ¡x: 5)"</code></pre>

            <h4>5.5.3 ExcepciÃ³n: Productos BAMBU</h4>
            <p><strong>Regla especial</strong>: Los productos con <code>proveedor = "BAMBU"</code> (proveedor propio)
                <strong>siempre se pueden agregar</strong> aunque tengan:
            </p>
            <ul>
                <li>Stock = 0</li>
                <li>Stock negativo (-5, -10, etc.)</li>
            </ul>

            <p><strong>Motivo</strong>: BAMBU fabrica sus propios productos, no depende de proveedores externos.</p>

            <p><strong>DiseÃ±o:</strong></p>
            <pre><code>Granel detergente Â· GRA-015 Â· $915 Â· Stock: -5
â† Se puede agregar sin restricciones</code></pre>
        </section>

        <section id="selector-de-cliente">
            <h2>6. SELECTOR DE CLIENTE</h2>

            <h3>6.1 UbicaciÃ³n</h3>
            <p><strong>Esquina superior derecha del header</strong> (despuÃ©s del buscador de productos)</p>

            <h3>6.2 DiseÃ±o</h3>
            <pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ‘¤ Cliente sin nombre    â–¼   â”‚  â† Dropdown
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Al hacer click:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ” Buscar cliente...         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Av. San MartÃ­n 1234          â”‚
â”‚ Calle Mitre 567              â”‚
â”‚ Venta FÃ¡brica (genÃ©rico)     â”‚
â”‚ Av. Roca 890                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>

            <h3>6.3 Comportamiento</h3>

            <h4>6.3.1 Estado por defecto</h4>
            <p><strong>Valor inicial</strong>: "Cliente sin nombre"</p>

            <p><strong>Significado</strong>:</p>
            <ul>
                <li>Pedido sin cliente asignado</li>
                <li><strong>NO genera cargo en cuenta corriente</strong></li>
                <li>Se puede asignar cliente despuÃ©s (editando el pedido)</li>
            </ul>

            <h4>6.3.2 BÃºsqueda de clientes</h4>
            <p><strong>Campo de bÃºsqueda</strong> (dentro del dropdown):</p>
            <ul>
                <li>Placeholder: "Buscar cliente..."</li>
                <li>BÃºsqueda por: DirecciÃ³n (nombre del cliente en Bambu CRM)</li>
                <li>Case-insensitive</li>
                <li>MÃ­nimo 2 caracteres</li>
            </ul>

            <p><strong>Resultados:</strong></p>
            <ul>
                <li>Formato compacto (1 lÃ­nea por cliente)</li>
                <li>InformaciÃ³n mostrada:
                    <ul>
                        <li>DirecciÃ³n (principal)</li>
                        <li>TelÃ©fono (opcional, si existe)</li>
                        <li>Saldo cuenta corriente (si tiene deuda/a favor)</li>
                    </ul>
                </li>
            </ul>

            <p><strong>Ejemplo:</strong></p>
            <pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ” Buscar cliente...                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Av. San MartÃ­n 1234 Â· 299-123456 Â· -$15.000 â”‚
â”‚ Av. Mitre 567 Â· 298-765432 Â· $0              â”‚
â”‚ Calle Roca 890 Â· +$5.000                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Indicadores de saldo:
-$15.000 (rojo)  â†’ Debe $15.000
$0 (gris)        â†’ Al dÃ­a
+$5.000 (verde)  â†’ A favor $5.000</code></pre>

            <h4>6.3.3 NavegaciÃ³n con teclado</h4>
            <p><strong>Problema identificado en v1</strong>: Buscador no permitÃ­a desplazarse correctamente entre
                resultados con flechas â†‘â†“</p>

            <p><strong>SoluciÃ³n v2</strong>:</p>
            <ul>
                <li>âœ… Flechas â†‘â†“ navegan entre resultados</li>
                <li>âœ… <strong>Resultado seleccionado siempre centrado en la lista</strong> (auto-scroll)</li>
                <li>âœ… Enter selecciona cliente</li>
                <li>âœ… Esc cierra dropdown sin seleccionar</li>
            </ul>

            <h4>6.3.4 SelecciÃ³n de cliente</h4>
            <p><strong>Al seleccionar:</strong></p>
            <ol>
                <li>Dropdown se cierra</li>
                <li>Se muestra direcciÃ³n del cliente en el selector</li>
                <li><strong>Descuento fijo del cliente se aplica automÃ¡ticamente</strong> (si tiene)</li>
                <li>Se actualiza el total</li>
            </ol>

            <p><strong>Ejemplo:</strong></p>
            <pre><code>Cliente seleccionado: Av. San MartÃ­n 1234
Descuento fijo configurado: 8%

Resultado:
âœ… Selector muestra: "Av. San MartÃ­n 1234"
âœ… Panel lateral muestra: "Descuento cliente: 8%"
âœ… Total recalculado automÃ¡ticamente</code></pre>

            <h4>6.3.5 Cambiar o quitar cliente</h4>
            <p><strong>Cambiar cliente:</strong></p>
            <ul>
                <li>Click en selector â†’ Abre dropdown nuevamente</li>
                <li>Busca y selecciona otro cliente</li>
                <li>Descuentos se actualizan segÃºn nuevo cliente</li>
            </ul>

            <p><strong>Quitar cliente:</strong></p>
            <ul>
                <li>BotÃ³n <code>[Ã—]</code> al lado del nombre del cliente</li>
                <li>Vuelve a "Cliente sin nombre"</li>
                <li>Descuentos de cliente se eliminan</li>
            </ul>
        </section>

        <section id="lista-de-productos-agregados">
            <h2>7. LISTA DE PRODUCTOS AGREGADOS</h2>

            <h3>7.1 UbicaciÃ³n</h3>
            <p><strong>Columna izquierda principal del cotizador</strong> (debajo del header)</p>

            <h3>7.2 DiseÃ±o de tabla</h3>
            <pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PRODUCTO            â”‚ SUBTOTAL â”‚ UNITARIO â”‚ CANT.        â”‚ ğŸ—‘      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Granel detergente   â”‚  $915    â”‚  $915    â”‚ [-] 1 [+]    â”‚  ğŸ—‘     â”‚
â”‚  GRA-015             â”‚          â”‚          â”‚              â”‚        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Detergente magistralâ”‚ $1,600   â”‚ $1,600   â”‚ [-] 1 [+]    â”‚  ğŸ—‘     â”‚
â”‚  PRD-018             â”‚          â”‚          â”‚              â”‚        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Detergente x5 lts   â”‚ $5,800   â”‚ $5,800   â”‚ [-] 1 [+]    â”‚  ğŸ—‘     â”‚
â”‚  ACC-017             â”‚          â”‚          â”‚              â”‚        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>

            <h3>7.3 Columnas de la tabla</h3>

            <h4>7.3.1 PRODUCTO</h4>
            <p><strong>Contenido:</strong></p>
            <ul>
                <li>Nombre del producto (truncado si es muy largo)</li>
            </ul>

            <p><strong>Formato:</strong></p>
            <pre><code>Granel detergente             â† Nombre (font-size: 14px, bold)</code></pre>

            <h4>7.3.2 SUBTOTAL</h4>
            <p><strong>Contenido</strong>: Precio unitario Ã— Cantidad</p>
            <p><strong>Formato:</strong></p>
            <ul>
                <li>Moneda: <code>$</code> + nÃºmero con separador de miles</li>
                <li>Ejemplo: <code>$5,800</code>, <code>$915</code></li>
            </ul>
            <p><strong>ActualizaciÃ³n</strong>: Se recalcula automÃ¡ticamente al cambiar cantidad</p>

            <h4>7.3.3 UNITARIO</h4>
            <p><strong>Contenido</strong>: Precio por unidad (segÃºn lista de precios aplicada)</p>
            <p><strong>Formato:</strong></p>
            <ul>
                <li>Moneda: <code>$</code> + nÃºmero con separador de miles</li>
                <li>Ejemplo: <code>$1,600</code></li>
            </ul>

            <p><strong>VariaciÃ³n segÃºn descuentos:</strong></p>
            <pre><code>Precio base: $1,000
Lista L2 aplicada (6.25% desc): $937.50
Precio unitario mostrado: $937.50

Subtotal con cantidad 5: $4,687.50</code></pre>

            <h4>7.3.4 CANT. (Cantidad)</h4>
            <p><strong>DiseÃ±o:</strong></p>
            <pre><code>[-]  1  [+]</code></pre>

            <p><strong>Botones:</strong></p>
            <ul>
                <li><code>[-]</code>: Restar 1 unidad</li>
                <li><code>[+]</code>: Sumar 1 unidad</li>
                <li>Centro: NÃºmero actual (puede ser input editable)</li>
            </ul>

            <p><strong>Comportamiento:</strong></p>
            <p><strong>BotÃ³n <code>[-]</code>:</strong></p>
            <ul>
                <li>Si cantidad = 1 â†’ Deshabilita botÃ³n (no permite cantidad = 0)</li>
                <li>Si cantidad > 1 â†’ Resta 1</li>
                <li><strong>Alternativa</strong>: Al llegar a 0, elimina el producto automÃ¡ticamente</li>
            </ul>

            <p><strong>BotÃ³n <code>[+]</code>:</strong></p>
            <ul>
                <li>Suma 1 sin lÃ­mite (excepto si modo ESTRICTO de stock)</li>
            </ul>

            <p><strong>Input numÃ©rico central:</strong></p>
            <ul>
                <li>Permite ediciÃ³n directa: Usuario puede escribir cantidad</li>
                <li>ValidaciÃ³n: Solo nÃºmeros enteros positivos</li>
                <li>Si escribe 0 o negativo â†’ Muestra advertencia o revierte a 1</li>
            </ul>

            <h3>7.4 Columna de acciones (ğŸ—‘)</h3>
            <p><strong>BotÃ³n eliminar:</strong></p>
            <ul>
                <li>Ãcono: ğŸ—‘ (basura) en rojo</li>
                <li>Hover: Cambia a rojo mÃ¡s intenso</li>
                <li>Click: Elimina la lÃ­nea del producto</li>
            </ul>

            <p><strong>ConfirmaciÃ³n</strong>: NO solicita confirmaciÃ³n (eliminaciÃ³n directa)</p>

            <p><strong>Efecto</strong>:</p>
            <ul>
                <li>Producto desaparece de la tabla</li>
                <li>Subtotal y total se recalculan</li>
                <li>Si no quedan productos â†’ Tabla queda vacÃ­a</li>
            </ul>
        </section>

        <section id="panel-lateral-resumen-y-totales">
            <h2>8. PANEL LATERAL: RESUMEN Y TOTALES</h2>

            <h3>8.1 UbicaciÃ³n</h3>
            <p><strong>Columna derecha del cotizador</strong> (30% del ancho, fija con scroll independiente)</p>

            <h3>8.2 Estructura completa</h3>
            <pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ RESUMEN                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Subtotal:          $8,315     â”‚
â”‚ ğŸ“¦ Entrega:    [12/27/2025]   â”‚
â”‚ âš–ï¸ Peso total:      7.20kg     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ LISTAS DE PRECIO              â”‚
â”‚ â˜ L1: 0.00% (Base)            â”‚
â”‚ â˜ L2: 6.25% (>$250k)          â”‚
â”‚ â˜ L3: 10.00% (>$1M)           â”‚
â”‚                               â”‚
â”‚ [% Aplicar L2] [% Aplicar L3] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Desc. Manual (%): [0______]   â”‚
â”‚ Ajuste ($):      [0______]    â”‚
â”‚ ğŸ“ Agregar nota               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ TOTAL FINAL                   â”‚
â”‚ $8,315                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ğŸ“„ Generar Resumen]          â”‚
â”‚ [ğŸ’¾ Guardar Borrador]         â”‚
â”‚ [âœ… Confirmar Pedido]         â”‚
â”‚    Agencias entrega           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âŒ¨ï¸ Shift+4 Confirmar          â”‚
â”‚ âŒ¨ï¸ F4 Resumen                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>

            <h3>8.3 SecciÃ³n: Resumen superior</h3>

            <h4>8.3.1 Subtotal</h4>
            <p><strong>Contenido</strong>: Suma de todos los productos antes de descuentos y ajustes</p>
            <p><strong>CÃ¡lculo</strong>:</p>
            <pre><code>subtotal = productos.reduce((sum, p) => sum + (p.cantidad * p.precio_unitario), 0)</code></pre>
            <p><strong>Formato</strong>: <code>$8,315</code> (grande, destacado)</p>

            <h4>8.3.2 Fecha de entrega (solo modo REPARTO)</h4>
            <p><strong>DiseÃ±o:</strong></p>
            <pre><code>ğŸ“¦ Entrega:  [12/27/2025] ğŸ“…
              â””â”€ Input date con Ã­cono calendario</code></pre>

            <p><strong>Comportamiento:</strong></p>
            <ul>
                <li><strong>Modo FÃBRICA</strong>: NO se muestra (entrega inmediata)</li>
                <li><strong>Modo REPARTO</strong>: Se muestra con fecha seleccionable</li>
            </ul>

            <p><strong>Restricciones:</strong></p>
            <ul>
                <li>Solo lunes a viernes (JavaScript valida fin de semana)</li>
                <li>Si selecciona sÃ¡bado/domingo â†’ Alerta: "Solo dÃ­as laborables (L-V)"</li>
                <li>Fecha mÃ­nima: Hoy</li>
                <li>Fecha mÃ¡xima: Ninguna (puede agendar a futuro)</li>
            </ul>

            <p><strong>Valor por defecto:</strong></p>
            <ul>
                <li>Si modo REPARTO â†’ Fecha actual</li>
                <li>Usuario puede cambiarla antes de confirmar</li>
            </ul>

            <h4>8.3.3 Peso total</h4>
            <p><strong>Contenido</strong>: Suma de pesos de todos los productos</p>
            <p><strong>Prerequisito</strong>: Productos deben tener campo <code>peso</code> en base de datos</p>
            <p><strong>CÃ¡lculo:</strong></p>
            <pre><code>peso_total = productos.reduce((sum, p) => sum + (p.cantidad * p.peso), 0)</code></pre>
            <p><strong>Formato</strong>: <code>7.20kg</code></p>
            <p><strong>Uso</strong>: Informativo para repartos (conocer capacidad de vehÃ­culos)</p>

            <h4>8.3.4 MÃ©todo de pago (SOLO modo FÃBRICA) â­ NUEVO</h4>
            <p><strong>CondiciÃ³n de visibilidad</strong>: Solo se muestra si <code>switch = FÃBRICA</code></p>
            <p><strong>PropÃ³sito</strong>: Registrar pago EN EL MOMENTO de la venta, evitando el doble paso de confirmar
                pedido y luego ir a VENTAS a registrar pago.</p>

            <p><strong>DiseÃ±o:</strong></p>
            <pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MÃ‰TODO DE PAGO (Opcional)     â”‚
â”‚ â˜ Efectivo                    â”‚
â”‚ â˜ Digital (MP/Transf)         â”‚
â”‚                               â”‚
â”‚ Monto recibido: [$8,315]      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>

            <p><strong>Comportamiento:</strong></p>
            <ol>
                <li><strong>Usuario NO marca nada</strong> (por defecto):
                    <ul>
                        <li>Pedido se confirma SIN pago registrado</li>
                        <li>Cliente queda con saldo pendiente</li>
                        <li>Caso de uso: Cliente retira fiado</li>
                    </ul>
                </li>
                <li><strong>Usuario marca Efectivo</strong>:
                    <ul>
                        <li>Input "Monto recibido" se auto-completa con total del pedido</li>
                        <li>Usuario puede editar monto (permite pago parcial)</li>
                    </ul>
                </li>
                <li><strong>Usuario marca Digital</strong>:
                    <ul>
                        <li>Igual que efectivo (auto-completa, permite pago parcial)</li>
                    </ul>
                </li>
                <li><strong>Usuario marca AMBOS (pago mixto)</strong>:
                    <ul>
                        <li>Se despliegan 2 inputs:
                            <pre><code>â˜‘ Efectivo: [$5,000]
â˜‘ Digital:  [$3,315]
Total recibido: $8,315 âœ“</code></pre>
                        </li>
                        <li>ValidaciÃ³n: <code>efectivo + digital = monto_recibido</code></li>
                        <li>Si no coincide â†’ Error: "âš ï¸ La suma debe igualar el monto recibido"</li>
                    </ul>
                </li>
            </ol>

            <p><strong>Pago parcial (CRÃTICO segÃºn feedback Carlos):</strong></p>
            <p><strong>Regla</strong>: El monto recibido <strong>NO tiene que igualar el total del pedido</strong></p>
            <p><strong>Ejemplo:</strong></p>
            <pre><code>Total pedido: $100,000
Monto recibido: $30,000 (efectivo)

Sistema muestra:
âš ï¸ Pago parcial detectado
Saldo pendiente: $70,000
(quedarÃ¡ en cuenta corriente)

Al confirmar:
- Cargo CC: +$100,000
- Pago CC: -$30,000 (efectivo)
- Saldo cliente: -$70,000 (debe)</code></pre>

            <p><strong>Monto recibido > Total</strong> (cliente paga de mÃ¡s):</p>
            <pre><code>Total pedido: $8,000
Monto recibido: $10,000

Sistema muestra:
â„¹ï¸ Pago excede el total
A favor del cliente: +$2,000
(quedarÃ¡ en cuenta corriente)

Al confirmar:
- Cargo CC: +$8,000
- Pago CC: -$10,000
- Saldo cliente: +$2,000 (a favor)</code></pre>
            <p><strong>Nota importante</strong>: Los pagos <strong>NO estÃ¡n atados al pedido especÃ­fico</strong>, solo
                reducen el saldo total del cliente (ver secciÃ³n 8.3.5).</p>

            <h4>8.3.5 Concepto: Pagos "asociados al momento" vs "atados al pedido" â­ NUEVO</h4>
            <p><strong>Regla fundamental</strong>: Los pagos en Bambu CRM <strong>NO estÃ¡n ATADOS a pedidos
                    especÃ­ficos</strong>, pero <strong>SÃ pueden registrarse EN EL MOMENTO de crear un pedido</strong>.
            </p>

            <p><strong>Diferencia clave entre "asociado" y "atado":</strong></p>

            <table>
                <tr>
                    <th>Concepto</th>
                    <th>Significado</th>
                </tr>
                <tr>
                    <td><strong>Pago ASOCIADO</strong></td>
                    <td>Se registra EN EL MOMENTO de crear el pedido (desde cotizador). El pedido guarda
                        <code>metodo_pago</code> y <code>monto_pagado</code>.
                    </td>
                </tr>
                <tr>
                    <td><strong>Pago ATADO</strong></td>
                    <td>âŒ El pago debe igualar exactamente el total del pedido. NO se permite pago parcial. El pago
                        "cierra" el pedido.</td>
                </tr>
            </table>

            <p><strong>Lo que Bambu CRM hace:</strong></p>
            <ul>
                <li>âœ… Permite pagos ASOCIADOS al momento de crear el pedido</li>
                <li>âœ… NO exige que el pago iguale el total (permite parciales)</li>
                <li>âœ… Los pagos reducen el SALDO TOTAL del cliente (no un pedido especÃ­fico)</li>
                <li>âœ… Pagos posteriores son completamente genÃ©ricos (no dicen "es para completar el pedido X")</li>
            </ul>

            <p><strong>Ejemplo conceptual completo:</strong></p>

            <p><strong>DÃ­a 1: Venta en fÃ¡brica con pago parcial (desde COTIZADOR)</strong></p>
            <pre><code>COTIZADOR modo FÃBRICA:
- Usuario crea pedido: $100,000
- Marca: â˜‘ Efectivo
- Monto recibido: $30,000 (pago parcial)
- Confirma pedido

Sistema registra:
â”œâ”€ Pedido #100:
â”‚  â”œâ”€ Total: $100,000
â”‚  â”œâ”€ metodo_pago: "efectivo"
â”‚  â”œâ”€ monto_pagado: $30,000  â† ASOCIADO al momento de crear pedido
â”‚  â””â”€ estado: "entregado"
â”‚
â””â”€ Cuenta Corriente:
   â”œâ”€ Cargo: +$100,000 (por pedido #100)
   â”œâ”€ Pago: -$30,000 (efectivo)
   â””â”€ Saldo: -$70,000 (debe)

En mÃ³dulo VENTAS se ve:
Pedido #100: Total $100k | Pagado $30k efectivo | Pendiente $70k</code></pre>

            <p><strong>DÃ­as despuÃ©s: Cliente hace otra compra (desde COTIZADOR)</strong></p>
            <pre><code>COTIZADOR modo FÃBRICA:
- Usuario crea pedido: $50,000
- NO registra pago (cliente retira fiado)
- Confirma pedido

Sistema registra:
â”œâ”€ Pedido #101:
â”‚  â”œâ”€ Total: $50,000
â”‚  â”œâ”€ metodo_pago: null
â”‚  â””â”€ estado: "entregado"
â”‚
â””â”€ Cuenta Corriente:
   â”œâ”€ Cargo: +$50,000 (por pedido #101)
   â””â”€ Saldo: -$120,000 (debe) â† $70k anterior + $50k nuevo</code></pre>

            <p><strong>DÃ­as despuÃ©s: Cliente paga (desde CUENTA CORRIENTE)</strong></p>
            <pre><code>MÃ“DULO CUENTA CORRIENTE:
- Usuario ve saldo: -$120,000
- [+ Registrar pago genÃ©rico]
- Monto: $80,000
- MÃ©todo: Digital (transferencia)
- Confirma

Sistema registra:
â””â”€ Cuenta Corriente:
   â”œâ”€ Pago genÃ©rico: -$80,000 (digital)
   â””â”€ Saldo: -$40,000 (debe)

âš ï¸ Este pago NO dice "es para completar pedido #100" o "#101"
âœ… Solo dice "pago genÃ©rico que reduce saldo total"

Pedidos NO cambian:
- Pedido #100 sigue mostrando: Pagado $30k, Pendiente $70k
- Pedido #101 sigue mostrando: Pagado $0, Pendiente $50k

El pago genÃ©rico $80k simplemente redujo el saldo total de -$120k a -$40k</code></pre>

            <p><strong>Resumen del comportamiento:</strong></p>
            <pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Pagos EN EL COTIZADOR (al crear pedido):                    â”‚
â”‚ âœ… Se registran "asociados" al pedido                        â”‚
â”‚ âœ… El pedido guarda metodo_pago y monto_pagado               â”‚
â”‚ âœ… Pueden ser parciales (no exige cubrir 100% del total)     â”‚
â”‚ âœ… Reducen el saldo total del cliente                        â”‚
â”‚                                                              â”‚
â”‚ Pagos POSTERIORES (desde Cuenta Corriente):                 â”‚
â”‚ âœ… Son completamente genÃ©ricos (no vinculados a pedidos)     â”‚
â”‚ âœ… Solo reducen el saldo total del cliente                   â”‚
â”‚ âœ… NO actualizan campos del pedido                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>

            <p><strong>Beneficios de este enfoque:</strong></p>
            <ul>
                <li>âœ… MÃ¡s flexible (cliente paga $X sin especificar a quÃ© pedido corresponde)</li>
                <li>âœ… Refleja la realidad del negocio (clientes pagan "a cuenta")</li>
                <li>âœ… Evita complejidad de asociar pagos a pedidos especÃ­ficos</li>
                <li>âœ… Permite pagos parciales y acumulativos</li>
            </ul>

            <p><strong>DÃ³nde se registran pagos:</strong></p>
            <ol>
                <li><strong>COTIZADOR modo FÃBRICA</strong>: Al momento de la venta (secciÃ³n 8.3.4)</li>
                <li><strong>MÃ“DULO CUENTA CORRIENTE</strong>: Pago genÃ©rico manual (ver cuenta-corriente.html)</li>
                <li><strong>MÃ“DULO VENTAS</strong>: Al marcar pedido como "Entregado" (solo modo REPARTO)</li>
            </ol>
        </section>

        <section id="configuracion-de-precios-y-descuentos">
            <h2>9. CONFIGURACIÃ“N DE PRECIOS Y DESCUENTOS</h2>

            <h3>9.1 JerarquÃ­a de descuentos (IMPORTANTE)</h3>
            <p><strong>Regla de oro</strong>: Los descuentos <strong>NO son acumulativos</strong>. Solo se aplica UNO a
                la vez.</p>

            <p><strong>Prioridad (de mayor a menor):</strong></p>
            <ol>
                <li>ğŸ¥‡ <strong>Descuento manual personalizado</strong> (input %)</li>
                <li>ğŸ¥ˆ <strong>Descuento fijo del cliente</strong> (configurado en perfil)</li>
                <li>ğŸ¥‰ <strong>Descuento por lista de precios</strong> (L1, L2, L3)</li>
            </ol>

            <p><strong>Ejemplo:</strong></p>
            <pre><code>Cliente: Av. San MartÃ­n 1234
Descuento fijo cliente: 8%
Lista L2 seleccionada: 6.25%
Descuento manual: 10%

Descuento aplicado: 10% (manual tiene prioridad)</code></pre>

            <h4>9.1.1 Base de cÃ¡lculo de descuentos</h4> â­ NUEVO (Dic 2025)
            <p><strong>Regla crÃ­tica</strong>: Los descuentos (listas, descuento fijo, descuento manual) se aplican sobre el <strong>subtotal MENOS los productos con precio promocional y combos</strong>.</p>

            <p><strong>Motivo</strong>: Los productos en promociÃ³n y combos ya tienen un precio especial fijo. Aplicar descuentos adicionales sobre ellos serÃ­a duplicar el beneficio.</p>

            <p><strong>CÃ¡lculo correcto</strong>:</p>
            <pre><code>Pedido:
- Producto A (normal): $1,000 x 5 = $5,000
- Producto B (promociÃ³n): $800 x 2 = $1,600 (precio promo fijo)
- Producto C (combo): $2,500 x 1 = $2,500 (precio promo fijo)

Subtotal total: $9,100

Base para descuento:
$9,100 - $1,600 (promo) - $2,500 (combo) = $5,000

Descuento (6.25%):
$5,000 Ã— 6.25% = $312.50

Total final:
Subtotal: $9,100
Descuento: -$312.50
Total: $8,787.50</code></pre>

            <p><strong>IdentificaciÃ³n de productos promocionales</strong>:</p>
            <ul>
                <li>Campo <code>en_promocion = true</code> en la base de datos</li>
                <li>Si <code>en_promocion = true</code> â†’ El producto NO entra en el cÃ¡lculo de descuentos</li>
                <li>Su precio promocional se suma directo al total sin descuentos adicionales</li>
            </ul>

            <p><strong>VisualizaciÃ³n en resumen</strong>:</p>
            <pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Subtotal productos: $9,100         â”‚
â”‚ - Productos en promo: $4,100       â”‚
â”‚ Base descuento: $5,000             â”‚
â”‚                                    â”‚
â”‚ Descuento (6.25%): -$312.50        â”‚
â”‚ TOTAL: $8,787.50                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>

            <h3>9.2 Listas de precio</h3>

            <h4>9.2.1 Estructura de listas</h4>
            <p><strong>3 listas predefinidas:</strong></p>
            <table>
                <tr>
                    <th>Lista</th>
                    <th>Descuento</th>
                    <th>Umbral</th>
                    <th>DescripciÃ³n</th>
                </tr>
                <tr>
                    <td>L1</td>
                    <td>0.00%</td>
                    <td>Sin umbral</td>
                    <td>Precio base (por defecto)</td>
                </tr>
                <tr>
                    <td>L2</td>
                    <td>6.25%</td>
                    <td>Compras >$250k</td>
                    <td>Mayoristas nivel 1</td>
                </tr>
                <tr>
                    <td>L3</td>
                    <td>10.00%</td>
                    <td>Compras >$1M</td>
                    <td>Mayoristas nivel 2 / VIP</td>
                </tr>
            </table>

            <p><strong>Nota</strong>: Los umbrales son informativos (mostrados en parÃ©ntesis), NO se aplican
                automÃ¡ticamente.</p>

            <h4>9.2.2 DiseÃ±o en panel lateral</h4>
            <pre><code>LISTAS DE PRECIO
â˜ L1: 0.00% (Base)
â˜ L2: 6.25% (>$250k)
â˜ L3: 10.00% (>$1M)

[% Aplicar L2]  [% Aplicar L3]</code></pre>

            <p><strong>Checkboxes:</strong></p>
            <ul>
                <li>Solo visual (readonly)</li>
                <li>Indica cuÃ¡l estÃ¡ activa actualmente</li>
                <li>Usuario NO puede seleccionar directamente</li>
            </ul>

            <p><strong>Botones de aplicaciÃ³n:</strong></p>
            <ul>
                <li><code>[% Aplicar L2]</code>: Aplica descuento L2 (6.25%)</li>
                <li><code>[% Aplicar L3]</code>: Aplica descuento L3 (10.00%)</li>
            </ul>

            <p><strong>Comportamiento al hacer click:</strong></p>
            <ol>
                <li>Desmarca lista anterior</li>
                <li>Marca lista seleccionada (âœ“)</li>
                <li>Recalcula precios de productos</li>
                <li>Actualiza total</li>
            </ol>

            <h4>9.2.3 AplicaciÃ³n de lista</h4>
            <p><strong>Por defecto:</strong> L1 (sin descuento)</p>

            <p><strong>Cambio de lista:</strong></p>
            <pre><code>Estado inicial:
- Producto A: $1,000 x 5 = $5,000
- Lista: L1 (0%)
- Subtotal: $5,000

Usuario click en [% Aplicar L2]:
- Producto A: $937.50 x 5 = $4,687.50 (6.25% desc)
- Lista: L2 (6.25%)
- Subtotal: $4,687.50

Diferencia: -$312.50</code></pre>

            <p><strong>EdiciÃ³n posterior:</strong></p>
            <ul>
                <li>La lista se puede cambiar incluso despuÃ©s de confirmar el pedido</li>
                <li>Al editar pedido existente â†’ cambiar lista â†’ guardar â†’ totales se actualizan</li>
            </ul>

            <h3>9.3 Descuento fijo de cliente</h3>
            <p><strong>Origen</strong>: Configurado en el perfil del cliente (campo <code>descuento_fijo</code>)</p>

            <p><strong>AplicaciÃ³n automÃ¡tica:</strong></p>
            <pre><code>Selector de cliente â†’ Selecciona "Av. San MartÃ­n 1234"
                           â†“
          Cliente tiene descuento_fijo = 8%
                           â†“
  Descuento se aplica automÃ¡ticamente al subtotal</code></pre>

            <p><strong>VisualizaciÃ³n:</strong></p>
            <pre><code>Panel lateral:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Subtotal: $10,000
Descuento cliente (8%): -$800
Total: $9,200</code></pre>

            <p><strong>Reemplazo de lista:</strong></p>
            <ul>
                <li>Si cliente tiene descuento fijo â†’ <strong>ignora</strong> lista de precios</li>
                <li>Prioridad: Descuento fijo > Lista</li>
            </ul>

            <p><strong>EdiciÃ³n:</strong></p>
            <ul>
                <li>Si usuario cambia cliente â†’ descuento se actualiza segÃºn nuevo cliente</li>
                <li>Si quita cliente â†’ descuento desaparece</li>
            </ul>

            <h3>9.4 Descuento manual personalizado</h3>

            <h4>9.4.1 Campo de entrada</h4>
            <p><strong>DiseÃ±o:</strong></p>
            <pre><code>Desc. Manual (%):  [0_____]
                    â””â”€ Input numÃ©rico</code></pre>

            <p><strong>CaracterÃ­sticas:</strong></p>
            <ul>
                <li>Type: <code>number</code></li>
                <li>Min: 0</li>
                <li>Max: 100</li>
                <li>Step: 0.01 (permite decimales: 5.5%, 12.75%, etc.)</li>
                <li>Placeholder: <code>0</code></li>
            </ul>

            <h4>9.4.2 AplicaciÃ³n</h4>
            <p><strong>Trigger</strong>: Usuario escribe un nÃºmero y presiona Enter o pierde focus</p>
            <p><strong>CÃ¡lculo:</strong></p>
            <pre><code>descuento_monto = (subtotal * descuento_manual) / 100
total_con_descuento = subtotal - descuento_monto</code></pre>

            <h4>9.4.3 Prioridad mÃ¡xima</h4>
            <p><strong>Comportamiento:</strong></p>
            <ul>
                <li>Si hay descuento manual > 0 â†’ <strong>Ignora</strong> descuento de cliente y lista</li>
                <li>Se muestra en resumen como: "Descuento personalizado: X%"</li>
            </ul>

            <h4>9.4.4 VisualizaciÃ³n en resumen</h4>
            <pre><code>Subtotal:                  $10,000
Descuento personalizado (12%): -$1,200
Total:                      $8,800</code></pre>
        </section>

        <section id="ajustes-y-notas">
            <h2>10. AJUSTES Y NOTAS</h2>

            <h3>10.1 Ajuste de monto (+/-)</h3>

            <h4>10.1.1 Campo de entrada</h4>
            <p><strong>DiseÃ±o:</strong></p>
            <pre><code>Ajuste ($):  [0_____]
              â””â”€ Input numÃ©rico (puede ser positivo o negativo)</code></pre>

            <p><strong>CaracterÃ­sticas:</strong></p>
            <ul>
                <li>Type: <code>number</code></li>
                <li>Permite valores positivos y negativos</li>
                <li>Placeholder: <code>0</code></li>
                <li>Sin decimales (solo enteros)</li>
            </ul>

            <h4>10.1.2 Usos comunes</h4>
            <p><strong>Casos de uso:</strong></p>
            <ul>
                <li>â• Cobrar deudas pendientes (<code>+$5,000</code>)</li>
                <li>â– Devolver dinero a favor (<code>-$2,000</code>)</li>
                <li>â• Redondeo hacia arriba (<code>+$15</code>)</li>
                <li>â– Descuento fijo en pesos (no porcentaje) (<code>-$500</code>)</li>
            </ul>

            <h4>10.1.3 ValidaciÃ³n crÃ­tica</h4>
            <p><strong>Regla</strong>: El ajuste negativo <strong>NO puede superar el total de la compra</strong></p>

            <p><strong>Ejemplo vÃ¡lido:</strong></p>
            <pre><code>Subtotal: $10,000
Descuento: -$1,000
Total antes de ajuste: $9,000

Usuario ingresa ajuste: -$500
Total final: $8,500 âœ… VÃ¡lido</code></pre>

            <p><strong>Ejemplo invÃ¡lido:</strong></p>
            <pre><code>Subtotal: $10,000
Descuento: -$1,000
Total antes de ajuste: $9,000

Usuario ingresa ajuste: -$10,000
Total final: -$1,000 âŒ INVÃLIDO

Advertencia:
"âš ï¸ El ajuste no puede superar el total ($9,000)"</code></pre>

            <h4>10.1.4 VisualizaciÃ³n en resumen</h4>
            <p><strong>Ajuste positivo:</strong></p>
            <pre><code>Subtotal:        $10,000
Descuento (8%):   -$800
Ajuste:         +$1,200  â† En verde
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Total final:    $10,400</code></pre>

            <p><strong>Ajuste negativo:</strong></p>
            <pre><code>Subtotal:        $10,000
Descuento (8%):   -$800
Ajuste:           -$500  â† En rojo
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Total final:     $8,700</code></pre>

            <h3>10.2 Notas del pedido</h3>

            <h4>10.2.1 BotÃ³n "Agregar nota"</h4>
            <p><strong>DiseÃ±o:</strong></p>
            <pre><code>ğŸ“ Agregar nota</code></pre>

            <p><strong>Comportamiento:</strong> Click â†’ Abre textarea expandible</p>

            <p><strong>Vista expandida:</strong></p>
            <pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Nota del pedido:             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Cliente pidiÃ³ envoltorio â”‚ â”‚
â”‚ â”‚ especial para regalo     â”‚ â”‚
â”‚ â”‚                          â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ [Cancelar] [Guardar]         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>

            <h4>10.2.2 CaracterÃ­sticas del campo</h4>
            <ul>
                <li>Type: <code>textarea</code></li>
                <li>Max length: 500 caracteres</li>
                <li>Placeholder: "Ejemplo: Cliente pidiÃ³ entrega antes de las 10am"</li>
                <li>Opcional (puede quedar vacÃ­o)</li>
            </ul>

            <h4>10.2.3 Guardar nota</h4>
            <p><strong>Trigger</strong>: Click en botÃ³n [Guardar]</p>
            <p><strong>Efecto:</strong></p>
            <ul>
                <li>Nota se guarda en pedido</li>
                <li>Textarea se colapsa</li>
                <li>BotÃ³n cambia a: "ğŸ“ Editar nota" (si hay nota guardada)</li>
            </ul>

            <h4>10.2.4 VisualizaciÃ³n con nota guardada</h4>
            <pre><code>ğŸ“ "Cliente pidiÃ³ envoltorio especial..."  [âœï¸ Editar]</code></pre>
            <p>Click en [âœï¸ Editar] â†’ Vuelve a abrir textarea con texto cargado</p>
        </section>

        <section id="totales-y-confirmacion">
            <h2>11. TOTALES Y CONFIRMACIÃ“N</h2>

            <h3>11.1 CÃ¡lculo de total final</h3>
            <p><strong>FÃ³rmula completa:</strong></p>
            <pre><code>subtotal = sum(productos.precio_unitario * productos.cantidad)

// Aplicar descuento (solo uno segÃºn jerarquÃ­a)
if (descuento_manual > 0) {
  descuento = (subtotal * descuento_manual) / 100
} else if (cliente.descuento_fijo > 0) {
  descuento = (subtotal * cliente.descuento_fijo) / 100
} else if (lista_seleccionada != 'L1') {
  descuento = (subtotal * lista_seleccionada.porcentaje) / 100
} else {
  descuento = 0
}

total_con_descuento = subtotal - descuento

// Aplicar ajuste
total_final = total_con_descuento + ajuste

// Validar que no sea negativo
if (total_final < 0) {
  error("El total no puede ser negativo")
}</code></pre>

            <h3>11.2 VisualizaciÃ³n del total</h3>
            <p><strong>DiseÃ±o:</strong></p>
            <pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ TOTAL FINAL                   â”‚
â”‚ $8,315                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>

            <p><strong>CaracterÃ­sticas:</strong></p>
            <ul>
                <li>Font-size: 32px (grande y destacado)</li>
                <li>Font-weight: bold</li>
                <li>Color: Verde oscuro (#2d7a3e)</li>
                <li>ActualizaciÃ³n: Tiempo real (al cambiar productos, descuentos, ajustes)</li>
            </ul>

            <h3>11.3 Botones de acciÃ³n</h3>

            <h4>11.3.1 [ğŸ“„ Generar Resumen]</h4>
            <p><strong>DiseÃ±o:</strong></p>
            <ul>
                <li>Color: Blanco con borde gris</li>
                <li>Ãcono: ğŸ“„</li>
            </ul>

            <p><strong>FunciÃ³n</strong>:</p>
            <ul>
                <li>Abre modal/vista previa con resumen del pedido</li>
                <li>Formato imprimible (similar a factura)</li>
                <li><strong>NO confirma el pedido</strong> (solo visualizaciÃ³n)</li>
            </ul>

            <p><strong>Contenido del resumen:</strong></p>
            <pre><code>â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     QUÃMICA BAMBU S.R.L.
     Resumen de Pedido
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Cliente: Av. San MartÃ­n 1234
Fecha: 27/12/2025
Tipo: REPARTO
Entrega: 12/27/2025

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
PRODUCTOS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Granel detergente (GRA-015)
Cantidad: 1 Ã— $915 = $915

Detergente magistral x1 (PRD-018)
Cantidad: 1 Ã— $1,600 = $1,600

Detergente x5 lts (ACC-017)
Cantidad: 1 Ã— $5,800 = $5,800

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Subtotal:           $8,315
Descuento (0%):         $0
Ajuste:                 $0
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
TOTAL:              $8,315
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Peso total: 7.20kg

Nota: [Si existe, mostrar aquÃ­]

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•</code></pre>

            <h4>11.3.1.1 PresentaciÃ³n clara del descuento en resumen</h4> â­ NUEVO (Dic 2025)
            <p><strong>Objetivo</strong>: Hacer mÃ¡s evidente y comprensible el descuento aplicado en el resumen del pedido.</p>

            <p><strong>Formato MEJORADO para descuentos</strong>:</p>

            <p><strong>Caso 1: Sin descuento (0%)</strong></p>
            <pre><code>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Subtotal:                    $8,315
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
TOTAL:                       $8,315
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
(No se muestra lÃ­nea de descuento si es $0)</code></pre>

            <p><strong>Caso 2: Con descuento por lista (ej: L2)</strong> â­ ACTUALIZADO (Dic 2025)</p>
            <pre><code>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Subtotal:                    $10,000
Descuento (6.25%):             -$625
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
TOTAL:                        $9,375
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</code></pre>
            <p><em>âš ï¸ IMPORTANTE: NO se menciona "L2" en el resumen para evitar confusiÃ³n. Solo se muestra el porcentaje de descuento aplicado.</em></p>

            <p><strong>Caso 3: Con descuento fijo de cliente</strong></p>
            <pre><code>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Subtotal:                    $10,000
Descuento (8%):                -$800
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
TOTAL:                        $9,200
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</code></pre>

            <p><strong>Caso 4: Con descuento manual personalizado</strong></p>
            <pre><code>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Subtotal:                    $10,000
Descuento (12%):             -$1,200
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
TOTAL:                        $8,800
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</code></pre>

            <p><strong>Caso 5: Con descuento + ajuste</strong></p>
            <pre><code>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Subtotal:                    $10,000
Descuento (10%):             -$1,000
Ajuste (redondeo):              +$15
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
TOTAL:                        $9,015
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</code></pre>

            <p><strong>Caso 6: Con productos en promociÃ³n (NUEVO)</strong></p>
            <pre><code>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Subtotal total:              $12,000
  â€¢ Productos normales: $10,000
  â€¢ Productos en promo: $2,000

Base descuento: $10,000
Descuento (6.25%):             -$625
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
TOTAL:                       $11,375
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

NOTA: Los productos en promociÃ³n
      NO reciben descuentos adicionales</code></pre>

            <p><strong>Reglas de formato</strong> â­ ACTUALIZADO (Dic 2025):</p>
            <ul>
                <li>âœ… <strong>Solo mostrar porcentaje de descuento</strong>: "Descuento (6.25%)" <strong>SIN mencionar</strong> L1/L2/L3/cliente/aplicado</li>
                <li>âœ… <strong>RazÃ³n del cambio</strong>: Evita confusiÃ³n. Clientes mal interpretaban "Descuento L1 6%" como "se aplicÃ³ el descuento DE L1" cuando en realidad significa "6% de descuento SOBRE precio L1"</li>
                <li>âœ… <strong>Mostrar porcentaje entre parÃ©ntesis</strong>: "(6.25%)"</li>
                <li>âœ… <strong>Monto con signo negativo</strong>: "-$625"</li>
                <li>âœ… <strong>AlineaciÃ³n derecha</strong> para todos los montos</li>
                <li>âœ… <strong>Ocultar lÃ­nea de descuento</strong> si el monto es $0</li>
                <li>âœ… <strong>Si hay productos promocionales</strong>: Mostrar desglose de subtotal</li>
            </ul>

            <p><strong>Acciones en modal:</strong></p>
            <ul>
                <li>[Imprimir]: Abre ventana de impresiÃ³n del navegador</li>
                <li>[Descargar PDF]: Genera PDF del resumen</li>
                <li>[Cerrar]: Vuelve al cotizador</li>
            </ul>

            <h4>11.3.1.1 ğŸ“¤ Generar Resumen para Compartir â­ NUEVO (Dic 2025)</h4>

            <p><strong>Funcionalidad</strong>: Genera resumen de cotizaciÃ³n en formatos listos para compartir con el cliente.</p>

            <p><strong>Acceso</strong>: BotÃ³n [ğŸ“¤ Compartir] en sidebar derecho del cotizador (despuÃ©s de agregar productos)</p>

            <div class="note" style="border-left: 4px solid #ffc107; background: #fff3cd; padding: 1rem; margin: 1.5rem 0;">
                <p><strong>âš ï¸ IMPORTANTE - EliminaciÃ³n de versiÃ³n Email</strong></p>
                <p>La versiÃ³n "Email" ha sido <strong>eliminada</strong> del sistema ya que nunca se usÃ³ ni se usarÃ¡. En su lugar, se implementa un <strong>Remito PDF formal</strong> profesional para enviar al cliente.</p>
            </div>

            <p><strong>Modal "Generar Resumen de CotizaciÃ³n"</strong>:</p>
            <pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“¤ Generar Resumen de CotizaciÃ³n            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                             â”‚
â”‚  Selecciona el formato para compartir:      â”‚
â”‚                                             â”‚
â”‚  [  WhatsApp  ] [  Remito PDF  ]            â”‚
â”‚  â””â”€ Activo â”€â”€â”˜  â””â”€ No activo â”€â”˜             â”‚
â”‚                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ [Contenido del resumen aquÃ­]        â”‚   â”‚
â”‚  â”‚                                     â”‚   â”‚
â”‚  â”‚ (Preview dinÃ¡mico segÃºn tab activo) â”‚   â”‚
â”‚  â”‚                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                             â”‚
â”‚  [Copiar]  [Descargar PDF]  [Cerrar]        â”‚
â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>

            <h5>OpciÃ³n 1: WhatsApp Business (Formato actual - SE MANTIENE)</h5>

            <p><strong>DiseÃ±o</strong>:</p>
            <ul>
                <li>Formato de texto plano con emojis</li>
                <li>Optimizado para copiar/pegar en WhatsApp Business</li>
                <li>Incluye: ğŸ”¥ COTIZACIÃ“N BAMBU ğŸ”¥, fecha, cliente, productos, resumen financiero</li>
            </ul>

            <p><strong>Ejemplo de contenido</strong>:</p>
            <pre><code>ğŸ”¥ COTIZACIÃ“N BAMBU ğŸ”¥

ğŸ“… Fecha: 31/12/2025
ğŸ‘¤ Cliente: -
ğŸ“ DirecciÃ³n: AVELINO GUTIERREZ 227
ğŸ“ TelÃ©fono: 298-467-3861

ğŸ“¦ PRODUCTOS:
â€¢ x1 - Detergente tipo magistral x5 lts - $5,800
â€¢ x1 - Detergente tipo magistral xl lt - $1,600
â€¢ x1 - Granel detergente - $915

ğŸ’° RESUMEN:
â€¢ Subtotal: $8,315
â€¢ TOTAL: $8,315

âš¡ Copia el texto y pÃ©galo en WhatsApp Business. Los emojis y formato se mantendrÃ¡n.</code></pre>

            <p><strong>BotÃ³n de acciÃ³n</strong>:</p>
            <ul>
                <li>[ğŸ“‹ Copiar]: Copia el texto al portapapeles</li>
                <li>Toast de confirmaciÃ³n: "âœ… Texto copiado. Listo para pegar en WhatsApp"</li>
            </ul>

            <h5>OpciÃ³n 2: Remito PDF Formal â­ NUEVO (Reemplaza a "versiÃ³n Email")</h5>

            <p><strong>DiseÃ±o</strong>:</p>
            <ul>
                <li>Documento PDF profesional con formato de remito comercial</li>
                <li>Sin emojis, texto formal</li>
                <li>Incluye: Logo Bambu, datos empresa, tabla productos, totales, condiciones</li>
                <li>Listo para descargar y enviar por email/WhatsApp como archivo adjunto</li>
            </ul>

            <p><strong>Estructura del PDF</strong>:</p>
            <pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [LOGO BAMBU]           REMITO NÂº XXXX       â”‚
â”‚                                              â”‚
â”‚  QuÃ­mica Bambu S.R.L.                        â”‚
â”‚  [DirecciÃ³n - TelÃ©fono - Email]              â”‚
â”‚                                              â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚                                              â”‚
â”‚  Asunto: CotizaciÃ³n BAMBU - - 31/12/2025    â”‚
â”‚                                              â”‚
â”‚  Estimado/a -,                               â”‚
â”‚                                              â”‚
â”‚  Adjuntamos la cotizaciÃ³n solicitada con     â”‚
â”‚  el detalle de productos BAMBU:              â”‚
â”‚                                              â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚  INFORMACIÃ“N DEL CLIENTE:                    â”‚
â”‚  Nombre: -                                   â”‚
â”‚  DirecciÃ³n: BARRIO COSTA NORTE SECTOR H 17  â”‚
â”‚  TelÃ©fono: 2995-33-4101                      â”‚
â”‚  Email: No especificado                      â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚  DETALLE DE PRODUCTOS:                       â”‚
â”‚                                              â”‚
â”‚  CÃ³digo  | DescripciÃ³n           | Cant | Precio Unit. | Subtotal â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  BAM-007 | Cherry desd. x5 1lts  | x3   | $2,950       | $8,850   â”‚
â”‚  QJT-000 | Lavanda desd. x5 1lts | x5   | $2,950       | $14,750  â”‚
â”‚  LJM-010 | Marina desd. x5 1lts  | x2   | $2,950       | $5,900   â”‚
â”‚  ...                                         â”‚
â”‚                                              â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚  RESUMEN FINANCIERO:                         â”‚
â”‚                                              â”‚
â”‚  Subtotal:          $88,750                  â”‚
â”‚  Descuento (0%):    $0                       â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                â”‚
â”‚  TOTAL:             $88,750                  â”‚
â”‚                                              â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚  Validez de la cotizaciÃ³n: 15 dÃ­as           â”‚
â”‚  Condiciones de pago: [SegÃºn acuerdo]        â”‚
â”‚                                              â”‚
â”‚  Gracias por su consulta.                    â”‚
â”‚                                              â”‚
â”‚  QuÃ­mica Bambu S.R.L.                        â”‚
â”‚  [Contacto - Web - Redes sociales]           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>

            <p><strong>Campos del remito</strong>:</p>
            <table>
                <tr>
                    <th>SecciÃ³n</th>
                    <th>Campos incluidos</th>
                </tr>
                <tr>
                    <td><strong>Encabezado</strong></td>
                    <td>Logo Bambu, datos empresa, NÂº remito, fecha</td>
                </tr>
                <tr>
                    <td><strong>Info cliente</strong></td>
                    <td>Nombre (direcciÃ³n si no tiene nombre), telÃ©fono, email (opcional)</td>
                </tr>
                <tr>
                    <td><strong>Tabla productos</strong></td>
                    <td>CÃ³digo producto, descripciÃ³n, cantidad, precio unitario, subtotal</td>
                </tr>
                <tr>
                    <td><strong>Totales</strong></td>
                    <td>Subtotal, descuento (% sin mencionar L1/L2/L3), total</td>
                </tr>
                <tr>
                    <td><strong>Pie</strong></td>
                    <td>Validez cotizaciÃ³n, condiciones pago, firma empresa, contacto</td>
                </tr>
            </table>

            <p><strong>BotÃ³n de acciÃ³n</strong>:</p>
            <ul>
                <li>[ğŸ“¥ Descargar PDF]: Descarga archivo "Remito_Bambu_[fecha]_[nro].pdf"</li>
                <li>Toast de confirmaciÃ³n: "âœ… Remito descargado correctamente"</li>
            </ul>

            <p><strong>Uso del remito</strong>:</p>
            <ul>
                <li>âœ… Comprobante formal para cliente</li>
                <li>âœ… Adjuntar en emails comerciales</li>
                <li>âœ… Enviar por WhatsApp como archivo (mÃ¡s profesional que texto plano)</li>
                <li>âœ… Imprimir para entregas en fÃ¡brica</li>
            </ul>

            <p><strong>Diferencias Email (ELIMINADO) vs Remito PDF (NUEVO)</strong>:</p>
            <table>
                <tr>
                    <th>CaracterÃ­stica</th>
                    <th>VersiÃ³n Email (ELIMINADA)</th>
                    <th>Remito PDF (NUEVO)</th>
                </tr>
                <tr>
                    <td><strong>Formato</strong></td>
                    <td>Texto plano para copiar en email</td>
                    <td>PDF descargable profesional</td>
                </tr>
                <tr>
                    <td><strong>DiseÃ±o</strong></td>
                    <td>Texto simple sin formato</td>
                    <td>Logo, tablas, colores corporativos</td>
                </tr>
                <tr>
                    <td><strong>Uso</strong></td>
                    <td>âŒ Nunca se usÃ³</td>
                    <td>âœ… Comprobante oficial</td>
                </tr>
                <tr>
                    <td><strong>Profesionalismo</strong></td>
                    <td>BÃ¡sico</td>
                    <td>Alto - Imagen corporativa</td>
                </tr>
            </table>

            <h4>11.3.2 [ğŸ’¾ Guardar Borrador]</h4>
            <p><strong>DiseÃ±o:</strong></p>
            <ul>
                <li>Color: Azul oscuro</li>
                <li>Ãcono: ğŸ’¾</li>
            </ul>

            <p><strong>FunciÃ³n</strong>:</p>
            <ul>
                <li>Guarda el pedido en estado "Borrador"</li>
                <li><strong>NO descuenta stock</strong></li>
                <li><strong>NO genera cargo en cuenta corriente</strong></li>
                <li>Permite continuar editando despuÃ©s</li>
            </ul>

            <p><strong>Flujo:</strong></p>
            <pre><code>Usuario click [Guardar Borrador]
       â†“
Sistema genera pedido_id
Estado: "borrador"
Stock: NO se descuenta
Cuenta corriente: NO se afecta
       â†“
Toast: "âœ… Borrador guardado (#1234)"
       â†“
Cotizador se limpia â†’ Nueva cotizaciÃ³n</code></pre>

            <p><strong>Recuperar borrador:</strong></p>
            <ul>
                <li>Desde mÃ³dulo VENTAS â†’ Filtrar por "Borrador"</li>
                <li>Click en pedido â†’ BotÃ³n "Editar"</li>
                <li>Se abre cotizador con datos cargados</li>
            </ul>

            <h4>11.3.3 [âœ… Confirmar Pedido] (Principal)</h4>
            <p><strong>DiseÃ±o:</strong></p>
            <ul>
                <li>Color: Verde brillante (#28a745)</li>
                <li>Ãcono: âœ…</li>
                <li>Texto secundario: "Agencias entrega" (en gris, mÃ¡s pequeÃ±o)</li>
                <li><strong>BotÃ³n mÃ¡s prominente</strong> (height mayor que otros)</li>
            </ul>

            <p><strong>FunciÃ³n</strong>: Confirma el pedido y ejecuta acciones segÃºn modo</p>

            <p><strong>Flujo MODO FÃBRICA (actualizado con mÃ©todo de pago):</strong> â­</p>
            <pre><code>Usuario click [Confirmar Pedido]
       â†“
Validaciones (ver secciÃ³n 13)
       â†“
Sistema genera pedido_id
Estado: "entregado"
Fecha: Hoy (timestamp actual)
Descuenta stock de productos
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SI usuario registrÃ³ mÃ©todo de pago:            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Cuenta Corriente:                               â”‚
â”‚ 1. Cargo: +Total pedido                         â”‚
â”‚ 2. Pago: -Monto recibido (efectivo/digital)     â”‚
â”‚ 3. Saldo: Total - Monto recibido                â”‚
â”‚                                                 â”‚
â”‚ Pedido guarda:                                  â”‚
â”‚ - metodo_pago: "efectivo"/"digital"/"mixto"     â”‚
â”‚ - monto_pagado: $X                              â”‚
â”‚ - monto_efectivo: $X (si aplica)                â”‚
â”‚ - monto_digital: $X (si aplica)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SI usuario NO registrÃ³ pago:                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Cuenta Corriente:                               â”‚
â”‚ 1. Cargo: +Total pedido                         â”‚
â”‚ 2. Saldo: Total (cliente debe)                  â”‚
â”‚                                                 â”‚
â”‚ Pedido guarda:                                  â”‚
â”‚ - metodo_pago: null                             â”‚
â”‚ - monto_pagado: null                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
Toast segÃºn caso:
- Con pago completo: "âœ… Pedido #1234 confirmado y pagado"
- Con pago parcial: "âœ… Pedido #1234 confirmado (pago parcial $X)"
- Sin pago: "âœ… Pedido #1234 confirmado"
       â†“
Cotizador se limpia â†’ Nueva cotizaciÃ³n
Focus en buscador de productos</code></pre>

            <p><strong>Ejemplos concretos:</strong></p>
            <p><strong>Caso 1: Pago completo efectivo</strong></p>
            <pre><code>Total: $8,315
Usuario marca: â˜‘ Efectivo
Monto recibido: $8,315

Resultado:
- Cargo CC: +$8,315
- Pago CC: -$8,315 (efectivo)
- Saldo cliente: $0
- metodo_pago: "efectivo"</code></pre>

            <p><strong>Caso 2: Pago parcial efectivo</strong></p>
            <pre><code>Total: $100,000
Usuario marca: â˜‘ Efectivo
Monto recibido: $30,000

Resultado:
- Cargo CC: +$100,000
- Pago CC: -$30,000 (efectivo)
- Saldo cliente: -$70,000 (debe)
- metodo_pago: "efectivo_parcial"
- monto_pagado: $30,000</code></pre>

            <p><strong>Caso 3: Pago mixto</strong></p>
            <pre><code>Total: $10,000
Usuario marca: â˜‘ Efectivo + â˜‘ Digital
Efectivo: $6,000
Digital: $4,000

Resultado:
- Cargo CC: +$10,000
- Pago CC efectivo: -$6,000
- Pago CC digital: -$4,000
- Saldo cliente: $0
- metodo_pago: "mixto"
- monto_efectivo: $6,000
- monto_digital: $4,000</code></pre>

            <p><strong>Caso 4: Sin pago</strong></p>
            <pre><code>Total: $8,315
Usuario NO marca nada

Resultado:
- Cargo CC: +$8,315
- Saldo cliente: -$8,315 (debe)
- metodo_pago: null
- Cliente pagarÃ¡ despuÃ©s</code></pre>

            <p><strong>Flujo MODO REPARTO:</strong></p>
            <pre><code>Usuario click [Confirmar Pedido]
       â†“
Validaciones (ver secciÃ³n 13)
       â†“
Modal calendario:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Seleccionar fecha de entrega  â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚  [Calendario L-V]         â”‚ â”‚
â”‚ â”‚  Fecha seleccionada:      â”‚ â”‚
â”‚ â”‚  ğŸ“… 27/12/2025            â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ [Cancelar] [Confirmar]        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
Usuario selecciona fecha y confirma
       â†“
Sistema:
- Genera pedido_id
- Estado: "en trÃ¡nsito"
- Fecha entrega: 27/12/2025
- Descuenta stock
- Si tiene cliente â†’ Cargo en cuenta corriente
       â†“
Toast: "âœ… Pedido #1234 agendado para 27/12"
       â†“
Cotizador se limpia â†’ Nueva cotizaciÃ³n
Focus en buscador de productos</code></pre>

            <h3>11.4 Atajos de teclado</h3>
            <p><strong>Mostrados en panel lateral:</strong></p>
            <pre><code>âŒ¨ï¸ Shift+4 Confirmar
âŒ¨ï¸ F4 Resumen</code></pre>

            <p><strong>Comportamiento:</strong></p>
            <ul>
                <li><code>Shift + 4</code>: Ejecuta [Confirmar Pedido]</li>
                <li><code>F4</code>: Ejecuta [Generar Resumen]</li>
            </ul>
            <p><strong>Disponibilidad</strong>: Activos en cualquier momento dentro del cotizador</p>
        </section>

        <section id="flujos-completos">
            <h2>12. FLUJOS COMPLETOS</h2>

            <h3>12.1 Flujo: Venta de fÃ¡brica rÃ¡pida (30 segundos)</h3>
            <p><strong>Escenario</strong>: Cliente retira producto en fÃ¡brica, paga en efectivo</p>
            <p><strong>Pasos:</strong></p>
            <ol>
                <li>Usuario abre COTIZADOR</li>
                <li>Switch en "FÃBRICA" (por defecto)</li>
                <li>Busca "detergente" â†’ Enter</li>
                <li>Producto "Granel detergente" se agrega con cantidad 1</li>
                <li>Click en [+] para aumentar a 2</li>
                <li><strong>NO selecciona cliente</strong> (deja "Cliente sin nombre")</li>
                <li>Click [Confirmar Pedido] o <code>Shift+4</code></li>
                <li>Sistema:
                    <ul>
                        <li>Genera pedido #1234</li>
                        <li>Estado: "entregado"</li>
                        <li>Stock: Descuenta 2 unidades de Granel detergente</li>
                        <li>Fecha: 27/12/2025 14:35:22</li>
                        <li><strong>NO genera cargo CC</strong> (sin cliente)</li>
                    </ul>
                </li>
                <li>Toast: "âœ… Pedido #1234 confirmado"</li>
                <li>Cotizador se limpia automÃ¡ticamente</li>
                <li>Listo para siguiente venta</li>
            </ol>
            <p><strong>Tiempo total</strong>: ~30 segundos âœ…</p>

            <h3>12.2 Flujo: Pedido reparto con descuento cliente</h3>
            <p><strong>Escenario</strong>: Cliente mayorista compra para entregar el viernes</p>
            <p><strong>Pasos:</strong></p>
            <ol>
                <li>Usuario abre COTIZADOR</li>
                <li>Switch en "REPARTO"</li>
                <li>Busca y selecciona cliente: "Av. San MartÃ­n 1234"
                    <ul>
                        <li>Sistema aplica automÃ¡ticamente descuento fijo del cliente (8%)</li>
                    </ul>
                </li>
                <li>Busca "detergente" â†’ Agrega 3 productos:
                    <ul>
                        <li>Granel detergente x 5</li>
                        <li>Detergente magistral x1 x 10</li>
                        <li>Detergente x5 lts x 3</li>
                    </ul>
                </li>
                <li>Subtotal mostrado: $50,000</li>
                <li>Descuento cliente (8%): -$4,000</li>
                <li>Total: $46,000</li>
                <li>Agrega nota: "Cliente pidiÃ³ entrega antes de las 10am"</li>
                <li>Click [Confirmar Pedido]</li>
                <li>Modal calendario abre â†’ Selecciona 29/12/2025 (viernes)</li>
                <li>Click [Confirmar] en modal</li>
                <li>Sistema:
                    <ul>
                        <li>Genera pedido #1235</li>
                        <li>Estado: "en trÃ¡nsito"</li>
                        <li>Fecha entrega: 29/12/2025</li>
                        <li>Stock: Descuenta todos los productos</li>
                        <li>Cuenta corriente: Cargo +$46,000</li>
                    </ul>
                </li>
                <li>Toast: "âœ… Pedido #1235 agendado para 29/12"</li>
                <li>Pedido aparece en:
                    <ul>
                        <li>MÃ³dulo VENTAS â†’ Tab "Lista Pedidos" (filtro: En trÃ¡nsito)</li>
                        <li>MÃ³dulo VENTAS â†’ Tab "Calendario Semana" â†’ DÃ­a 29/12</li>
                    </ul>
                </li>
                <li>Cotizador se limpia â†’ Nueva cotizaciÃ³n</li>
            </ol>

            <h3>12.3 Flujo: Editar pedido existente desde VENTAS</h3>
            <p><strong>Escenario</strong>: Usuario necesita cambiar cantidad de un producto ya confirmado</p>
            <p><strong>Pasos:</strong></p>
            <ol>
                <li>Usuario abre mÃ³dulo VENTAS</li>
                <li>Busca pedido #1234</li>
                <li>Click en botÃ³n [âœï¸ Editar]</li>
                <li><strong>Se abre COTIZADOR en modo ediciÃ³n</strong></li>
                <li>Cotizador carga:
                    <ul>
                        <li>Productos del pedido con cantidades actuales</li>
                        <li>Cliente seleccionado</li>
                        <li>Descuentos aplicados</li>
                        <li>Notas (si existen)</li>
                        <li>Switch en el modo correcto (FÃBRICA/REPARTO)</li>
                    </ul>
                </li>
                <li>Usuario modifica:
                    <ul>
                        <li>Cambia cantidad de "Granel detergente" de 2 a 3</li>
                    </ul>
                </li>
                <li>Subtotal y total se recalculan automÃ¡ticamente</li>
                <li>Click [Confirmar Pedido]</li>
                <li>Sistema:
                    <ul>
                        <li>Actualiza pedido #1234</li>
                        <li>Recalcula stock (reintegra diferencia o descuenta adicional)</li>
                        <li>Genera AJUSTE en cuenta corriente (si cambia total)</li>
                        <li>Registra historial de cambios (ver secciÃ³n AuditorÃ­a)</li>
                    </ul>
                </li>
                <li>Toast: "âœ… Pedido #1234 actualizado"</li>
                <li>Vuelve a mÃ³dulo VENTAS</li>
                <li>Pedido muestra totales actualizados</li>
            </ol>

            <h3>12.4 Flujo: Guardar borrador y recuperar</h3>
            <p><strong>Escenario</strong>: Usuario necesita pausar cotizaciÃ³n para atender otro cliente</p>
            <p><strong>Pasos:</strong></p>
            <ol>
                <li>Usuario estÃ¡ cotizando:
                    <ul>
                        <li>3 productos agregados</li>
                        <li>Cliente: Av. Mitre 567</li>
                        <li>Total: $25,000</li>
                    </ul>
                </li>
                <li>Click [ğŸ’¾ Guardar Borrador]</li>
                <li>Sistema:
                    <ul>
                        <li>Genera pedido #1236</li>
                        <li>Estado: "borrador"</li>
                        <li>Stock: NO se descuenta</li>
                        <li>Cuenta corriente: NO se afecta</li>
                    </ul>
                </li>
                <li>Toast: "âœ… Borrador guardado (#1236)"</li>
                <li>Cotizador se limpia</li>
                <li><strong>1 hora despuÃ©s</strong>: Usuario quiere retomar</li>
                <li>Abre mÃ³dulo VENTAS â†’ Filtro "Borradores"</li>
                <li>Ve pedido #1236 (estado: Borrador)</li>
                <li>Click [âœï¸ Editar]</li>
                <li>Cotizador se abre con todos los datos cargados</li>
                <li>Usuario puede:
                    <ul>
                        <li>Modificar productos</li>
                        <li>Cambiar descuentos</li>
                        <li>Confirmar pedido â†’ Pasa a "entregado" o "en trÃ¡nsito"</li>
                        <li>Eliminar borrador</li>
                    </ul>
                </li>
            </ol>
        </section>

        <section id="validaciones-y-reglas-de-negocio">
            <h2>13. VALIDACIONES Y REGLAS DE NEGOCIO</h2>

            <h3>13.1 Stock</h3>
            <ul>
                <li><strong>Modo FLEXIBLE</strong>: Permite agregar sin lÃ­mite. Advierte si
                    <code>cantidad > stock</code>.</li>
                <li><strong>Modo ESTRICTO</strong>: Bloquea si <code>cantidad > stock</code>.</li>
                <li><strong>Productos BAMBU</strong>: Siempre permite agregar (stock infinito).</li>
            </ul>

            <h3>13.2 Cuenta Corriente</h3>
            <p><strong>Bloqueo por deuda (Opcional)</strong></p>
            <ul>
                <li>Si <code>cliente.saldo < limite_credito</code> â†’ Muestra alerta "Cliente excede lÃ­mite de crÃ©dito".
                </li>
                <li>Permite continuar solo con autorizaciÃ³n (password admin) o si paga en el momento.</li>
            </ul>

            <h3>13.3 Descuentos</h3>
            <ul>
                <li><strong>Prioridad</strong>: Manual > Cliente > Lista.</li>
                <li><strong>Tope mÃ¡ximo</strong>: Configurable (ej. mÃ¡x 50%). Si usuario ingresa mÃ¡s â†’ Error.</li>
            </ul>

            <h3>13.4 "Cliente sin nombre"</h3>
            <ul>
                <li>Permite cotizar sin restricciones.</li>
                <li><strong>NO permite confirmar en modo REPARTO</strong> (requiere direcciÃ³n/cliente real).</li>
                <li>Permite confirmar en modo FÃBRICA (venta mostrador anÃ³nima).</li>
            </ul>
        </section>

        <section id="estados-y-transiciones">
            <h2>14. ESTADOS Y TRANSICIONES</h2>

            <table>
                <tr>
                    <th>Estado</th>
                    <th>DescripciÃ³n</th>
                    <th>Stock</th>
                    <th>Cuenta Cte.</th>
                </tr>
                <tr>
                    <td><strong>Borrador</strong></td>
                    <td>Guardado temporalmente. No confirmado.</td>
                    <td>Intacto</td>
                    <td>Intacto</td>
                </tr>
                <tr>
                    <td><strong>En trÃ¡nsito</strong></td>
                    <td>Confirmado para reparto. Pendiente de entrega.</td>
                    <td>Descontado</td>
                    <td>Cargado</td>
                </tr>
                <tr>
                    <td><strong>Entregado</strong></td>
                    <td>Venta finalizada (fÃ¡brica) o reparto completado.</td>
                    <td>Descontado</td>
                    <td>Cargado</td>
                </tr>
                <tr>
                    <td><strong>Cancelado</strong></td>
                    <td>Pedido anulado.</td>
                    <td>Reintegrado</td>
                    <td>Anulado</td>
                </tr>
            </table>

            <h3>14.1 Transiciones permitidas</h3>
            <ul>
                <li>Borrador â†’ En trÃ¡nsito (Modo Reparto)</li>
                <li>Borrador â†’ Entregado (Modo FÃ¡brica)</li>
                <li>En trÃ¡nsito â†’ Entregado (Desde mÃ³dulo VENTAS)</li>
                <li>En trÃ¡nsito â†’ Cancelado (Desde VENTAS)</li>
                <li>Entregado â†’ Cancelado (Reintegra stock y saldo)</li>
            </ul>
        </section>

        <section id="integraciones-con-otros-modulos">
            <h2>15. INTEGRACIONES CON OTROS MÃ“DULOS</h2>

            <h3>15.1 MÃ³dulo VENTAS</h3>
            <ul>
                <li>Visualiza todos los pedidos generados.</li>
                <li>Permite editar (reabre cotizador).</li>
                <li>Permite cambiar estado (En trÃ¡nsito â†” Entregado).</li>
            </ul>

            <h3>15.2 MÃ³dulo CLIENTES</h3>
            <ul>
                <li>Provee datos para el selector de clientes.</li>
                <li>Provee <code>descuento_fijo</code> y <code>saldo</code> actual.</li>
            </ul>

            <h3>15.3 MÃ³dulo PRODUCTOS</h3>
            <ul>
                <li>Provee lista de productos, precios y stock.</li>
                <li>Define si es "Producto BAMBU" (siempre disponible).</li>
            </ul>

            <h3>15.4 MÃ³dulo CONFIGURACIÃ“N</h3>
            <ul>
                <li>Define listas de precios (L1, L2, L3).</li>
                <li>Define modo de stock (Flexible/Estricto).</li>
            </ul>
        </section>

        <section id="atajos-de-teclado">
            <h2>16. ATAJOS DE TECLADO</h2>

            <table>
                <tr>
                    <th>Tecla</th>
                    <th>AcciÃ³n</th>
                    <th>Ãmbito</th>
                </tr>
                <tr>
                    <td><code>F4</code></td>
                    <td>Generar Resumen (Vista previa)</td>
                    <td>Global Cotizador</td>
                </tr>
                <tr>
                    <td><code>Shift + 4</code></td>
                    <td>Confirmar Pedido ($)</td>
                    <td>Global Cotizador</td>
                </tr>
                <tr>
                    <td><code>Esc</code></td>
                    <td>Cerrar dropdowns / modals / cotizador</td>
                    <td>Global</td>
                </tr>
                <tr>
                    <td><code>Enter</code></td>
                    <td>Agregar producto seleccionado / Confirmar</td>
                    <td>Buscador / Modals</td>
                </tr>
                <tr>
                    <td><code>Flecha â†‘/â†“</code></td>
                    <td>Navegar resultados bÃºsqueda</td>
                    <td>Buscadores</td>
                </tr>
            </table>
        </section>

        <section id="casos-de-uso-detallados">
            <h2>17. CASOS DE USO DETALLADOS</h2>

            <h3>17.1 Venta FÃ¡brica con Pago Parcial (Usuario registrado)</h3>
            <p><strong>Actor</strong>: Vendedor de mostrador<br>
                <strong>CondiciÃ³n previa</strong>: Cliente "Juan PÃ©rez" debe $10,000.
            </p>

            <ol>
                <li>Vendedor selecciona "FÃ¡brica".</li>
                <li>Selecciona cliente "Juan PÃ©rez".</li>
                <li>Agrega productos. Total: $5,000.</li>
                <li>Check "Efectivo", ingresa $2,000.</li>
                <li>Cliente dice "anÃ³tame el resto".</li>
                <li>Confirmar.</li>
            </ol>

            <p><strong>Resultado sistema</strong>:</p>
            <ul>
                <li>Pedido guardado.</li>
                <li>Saldo Juan PÃ©rez: -$10,000 + $5,000 (compra) - $2,000 (pago) = <strong>-$13,000</strong>.</li>
            </ul>

            <h3>17.2 Reparto con fecha futura y stock crÃ­tico</h3>
            <p><strong>Actor</strong>: Administrativo telÃ©fono<br>
                <strong>CondiciÃ³n</strong>: Producto X tiene stock 2. Cliente quiere 10 para la prÃ³xima semana.
                ReposiciÃ³n llega en 2 dÃ­as.
            </p>

            <ol>
                <li>Vendedor selecciona "Reparto".</li>
                <li>Agrega 10 unidades de Producto X.</li>
                <li>Alerta: "Stock insuficiente (2). Â¿Agregar igual?".</li>
                <li>Vendedor confirma (sabe que llega reposiciÃ³n).</li>
                <li>Elige fecha: Viernes prÃ³ximo.</li>
                <li>Confirmar.</li>
            </ol>

            <p><strong>Resultado sistema</strong>:</p>
            <ul>
                <li>Pedido "En trÃ¡nsito" para el viernes.</li>
                <li>Stock Producto X: 2 - 10 = -8.</li>
                <li>Reporte de stock crÃ­tico alerta la necesidad de reposiciÃ³n.</li>
            </ul>
        </section>

        <section id="especificaciones-tecnicas-ui-ux">
            <h2>18. ESPECIFICACIONES TÃ‰CNICAS UI/UX</h2>

            <h3>18.1 Colores (Variables CSS)</h3>
            <pre><code>:root {
  --color-primary: #007bff;        /* Azul Bambu */
  --color-success: #28a745;        /* Verde Confirmar/Totales */
  --color-warning: #ffc107;        /* Alertas */
  --color-danger: #dc3545;         /* Borrar/Errores */
  --color-text: #333333;           /* Texto principal */
  --color-text-secondary: #6c757d; /* Notas secundarias */
  --color-border: #dee2e6;         /* Bordes de tablas/inputs */
  --bg-panel: #f8f9fa;             /* Fondo panel lateral */
}</code></pre>

            <h3>18.2 TipografÃ­a</h3>
            <ul>
                <li>Familia: <strong>Inter</strong> o sistema sans-serif.</li>
                <li>TamaÃ±os:
                    <ul>
                        <li>Total Final: <code>2rem (32px)</code> bold.</li>
                        <li>Subtotales: <code>1.2rem</code> bold.</li>
                        <li>Texto base: <code>1rem (16px)</code>.</li>
                        <li>Small (notas, fechas): <code>0.875rem (14px)</code>.</li>
                    </ul>
                </li>
            </ul>

            <h3>18.3 Espaciado</h3>
            <ul>
                <li>Padding celdas tabla: <code>12px 16px</code> (confortable pero compacto).</li>
                <li>Gap entre botones: <code>8px</code>.</li>
                <li>Margin secciones panel: <code>24px</code>.</li>
            </ul>

            <h3>18.4 Breakpoints (Responsividad)</h3>
            <ul>
                <li><strong>Desktop (>1200px)</strong>: Layout 2 columnas (70/30).</li>
                <li><strong>Tablet (768px - 1199px)</strong>: Layout 2 columnas ajustado (60/40) o Stack vertical.</li>
                <li><strong>Mobile (<768px)< /strong>: Stack vertical.
                            <ul>
                                <li>Panel lateral pasa debajo de la tabla.</li>
                                <li>Sticky bottom para botÃ³n "Confirmar" y "Total".</li>
                            </ul>
                </li>
            </ul>

            <h3>18.5 Estados de interacciÃ³n</h3>
            <ul>
                <li><strong>Focus</strong>: Outline azul (<code>box-shadow: 0 0 0 3px rgba(0,123,255,.25)</code>).</li>
                <li><strong>Hover tabla</strong>: Row background <code>#f1f1f1</code>.</li>
                <li><strong>Disabled</strong>: Opacidad 0.6, cursor <code>not-allowed</code>.</li>
            </ul>

            <h3>18.6 Animaciones</h3>
            <ul>
                <li><strong>Agregar producto</strong>: Flash verde suave en la fila.</li>
                <li><strong>Eliminar producto</strong>: Fade out rÃ¡pido (200ms).</li>
                <li><strong>Cambio de total</strong>: TransiciÃ³n de nÃºmero (opcional).</li>
            </ul>

            <h3>18.7 Toast Notifications</h3>
            <p><strong>PosiciÃ³n</strong>: Superior central o inferior derecha (configurable).</p>
            <p><strong>DiseÃ±o</strong>:</p>
            <pre><code>[ Icono ]  Mensaje breve             [ x ]
Fondo: Negro/Gris muy oscuro. Texto: Blanco.</code></pre>

            <h3>18.8 Accesibilidad</h3>
            <ul>
                <li>NavegaciÃ³n completa por teclado (Tab indexing lÃ³gico).</li>
                <li>Contraste suficiente en textos (WCAG AA).</li>
                <li>Labels visibles o `aria-label` en inputs/botones sin texto.</li>
            </ul>
        </section>

        <section id="prototipo-actualizaciones">
            <h2>19. ACTUALIZACIONES DEL PROTOTIPO HTML (Diciembre 2025)</h2>

            <div class="note" style="border-left: 4px solid #28a745; background: #d4edda; padding: 1rem; margin: 1.5rem 0;">
                <h3>âœ… PROTOTIPO HTML COMPLETADO</h3>
                <p><strong>UbicaciÃ³n</strong>: <code>sistema-version-2/prototipo-html-simple/cotizador-v2.html</code></p>
                <p><strong>Estado</strong>: âœ… Prototipo funcional implementado con feedback del cliente</p>
                <p><strong>DocumentaciÃ³n tÃ©cnica</strong>: Ver <code>_docs/COTIZADOR-ESPECIFICACION.md</code></p>
            </div>

            <h3>19.1 Funciones unificadas REPARTO + FÃBRICA</h3>
            <p><strong>DecisiÃ³n crÃ­tica</strong> (Feedback cliente - Dic 2025):</p>
            <blockquote>
                "Simplificar todo poniendo ambas funciones en ambas modalidades. Siempre que estÃ© tanto el calendario como los mÃ©todos de pago, en reparto y fÃ¡brica. La Ãºnica diferencia es dÃ³nde va a parar (ventas fÃ¡brica vs dÃ­as de reparto)."
            </blockquote>

            <p><strong>Cambios implementados</strong>:</p>

            <table>
                <tr>
                    <th>Elemento</th>
                    <th>Antes (v1)</th>
                    <th>Ahora (v2)</th>
                    <th>Impacto</th>
                </tr>
                <tr>
                    <td><strong>Campo Fecha Entrega</strong></td>
                    <td>Solo REPARTO</td>
                    <td>âœ… AMBOS modos</td>
                    <td>Flexibilidad para ventas fÃ¡brica programadas</td>
                </tr>
                <tr>
                    <td><strong>MÃ©todos de pago</strong></td>
                    <td>Solo FÃBRICA</td>
                    <td>âœ… AMBOS modos</td>
                    <td>Permite registrar pagos en reparto si se cobrÃ³ al confirmar</td>
                </tr>
                <tr>
                    <td><strong>Checkboxes pago</strong></td>
                    <td>Efectivo | Digital (solo FÃ¡brica)</td>
                    <td>âœ… Efectivo | Digital (ambos)</td>
                    <td>UnificaciÃ³n de flujo</td>
                </tr>
                <tr>
                    <td><strong>Input monto</strong></td>
                    <td>Solo visible en FÃ¡brica</td>
                    <td>âœ… Siempre visible</td>
                    <td>Split efectivo/digital en ambos modos</td>
                </tr>
                <tr>
                    <td><strong>ValidaciÃ³n monto</strong></td>
                    <td>Solo en FÃ¡brica</td>
                    <td>âœ… En ambos modos</td>
                    <td>Consistencia de validaciones</td>
                </tr>
            </table>

            <p><strong>UbicaciÃ³n cÃ³digo</strong>:</p>
            <ul>
                <li>HTML: <code>cotizador-v2.html</code> lÃ­neas 171-294</li>
                <li>CSS: Estilos ya existentes (sin cambios)</li>
                <li>JS: <code>script-v2.js</code> funciÃ³n <code>updateModeUI()</code> simplificada (lÃ­neas 208-218)</li>
            </ul>

            <p><strong>LÃ³gica JS simplificada</strong>:</p>
            <pre><code>// ANTES: Condicional complejo
function updateModeUI() {
    if (state.mode === 'FABRICA') {
        els.rowDeliveryDate.classList.add('hidden');      // âŒ Ocultar fecha
        els.paymentSection.classList.remove('hidden');    // âœ… Mostrar pago
        els.btnConfirm.textContent = "Entregar ahora";
    } else {
        els.rowDeliveryDate.classList.remove('hidden');   // âœ… Mostrar fecha
        els.paymentSection.classList.add('hidden');       // âŒ Ocultar pago
        els.btnConfirm.textContent = "Agendar entrega";
    }
}

// AHORA: Simplificado
function updateModeUI() {
    // Ambas secciones siempre visibles
    // Solo cambia texto del botÃ³n
    if (state.mode === 'FABRICA') {
        els.btnConfirm.textContent = "Entregar ahora";
    } else {
        els.btnConfirm.textContent = "Agendar entrega";
    }
}</code></pre>

            <h3>19.2 Selector de cliente DIRECTO (sin dropdown)</h3>
            <p><strong>Problema identificado</strong>:</p>
            <ul>
                <li>âŒ Cliente debÃ­a hacer clic en "Cliente sin nombre" para abrir dropdown</li>
                <li>âŒ Luego hacer clic en input de bÃºsqueda</li>
                <li>âŒ Total: 2 clics antes de buscar</li>
            </ul>

            <p><strong>SoluciÃ³n implementada</strong>:</p>
            <ul>
                <li>âœ… Input directo con placeholder "Buscar cliente..."</li>
                <li>âœ… Resultados aparecen al escribir (como productos)</li>
                <li>âœ… Input vacÃ­o = "Cliente sin nombre"</li>
                <li>âœ… **ReducciÃ³n: 1 clic menos**</li>
            </ul>

            <p><strong>Estructura HTML</strong>:</p>
            <pre><code>&lt;!-- ANTES: Widget con dropdown --&gt;
&lt;div class="client-widget"&gt;
    &lt;div class="client-status" id="client-status-display"&gt;
        &lt;span&gt;Cliente sin nombre&lt;/span&gt;
        &lt;i class="fas fa-chevron-down"&gt;&lt;/i&gt;
    &lt;/div&gt;
    &lt;div class="client-dropdown hidden"&gt;
        &lt;input type="text" id="input-cliente" placeholder="Buscar..."&gt;
        &lt;div id="results-cliente"&gt;&lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;!-- AHORA: Input directo --&gt;
&lt;div class="client-search-container"&gt;
    &lt;i class="fas fa-user-circle"&gt;&lt;/i&gt;
    &lt;input type="text" id="input-cliente" placeholder="Buscar cliente..." autocomplete="off"&gt;
    &lt;div id="results-cliente" class="floating-results hidden"&gt;
        &lt;!-- Resultados inyectados aquÃ­ --&gt;
    &lt;/div&gt;
&lt;/div&gt;</code></pre>

            <p><strong>Estilos CSS</strong>:</p>
            <pre><code>.client-search-container {
    margin-left: auto;
    position: relative;
    width: 300px;           /* Alineado con panel derecho */
    flex-shrink: 0;
}

.client-search-container input {
    width: 100%;
    padding: 12px 16px 12px 40px;
    border: 1px solid var(--border-subtle);
    border-radius: 8px;
    font-size: 15px;
    outline: none;
    background: #fff;
    transition: all 0.2s;
}

.client-search-container input:focus {
    border-color: var(--accent);
    box-shadow: 0 0 0 2px rgba(0, 82, 204, 0.2);
}

.client-search-container i {
    position: absolute;
    left: 14px;
    top: 50%;
    transform: translateY(-50%);
    color: var(--text-light);
}</code></pre>

            <p><strong>LÃ³gica JS actualizada</strong>:</p>
            <pre><code>// Event listeners simplificados
els.inputClientSearch.addEventListener('input', (e) => searchClients(e.target.value));
els.inputClientSearch.addEventListener('focus', () => {
    if (els.inputClientSearch.value.length >= 2)
        els.resultsCliente.classList.remove('hidden');
});

// BÃºsqueda de clientes
function searchClients(query) {
    if (query.length < 2) {
        els.resultsCliente.classList.add('hidden');
        if (query.length === 0) {
            state.selectedClient = null;  // Reset a "sin nombre"
            updateTotals();
        }
        return;
    }

    const matches = MOCK_CLIENTS.filter(c =>
        c.name.toLowerCase().includes(query.toLowerCase())
    );

    els.resultsCliente.innerHTML = matches.map(c => `
        &lt;div class="prod-row compact" onclick="selectClient(${c.id})"&gt;
            &lt;div class="prod-info-line"&gt;
                &lt;span class="p-name"&gt;${c.name}&lt;/span&gt;
                &lt;span class="p-meta"&gt;${c.address}&lt;/span&gt;
            &lt;/div&gt;
            &lt;div class="prod-add"&gt;&lt;i class="fas fa-check-circle"&gt;&lt;/i&gt;&lt;/div&gt;
        &lt;/div&gt;
    `).join('');

    els.resultsCliente.classList.remove('hidden');
}

// SelecciÃ³n de cliente
function selectClient(id) {
    const client = MOCK_CLIENTS.find(c => c.id === id);
    state.selectedClient = client;

    els.inputClientSearch.value = client.name;  // Muestra nombre en input
    updateTotals();
    els.resultsCliente.classList.add('hidden');
}</code></pre>

            <h3>19.3 Sidebar Auto-Collapse (todos los mÃ³dulos)</h3>
            <p><strong>Comportamiento implementado</strong>:</p>
            <ol>
                <li>Al cargar pÃ¡gina: Sidebar expandido por 5 segundos â†’ auto-collapse</li>
                <li><code>mouseenter</code> sobre sidebar â†’ expand</li>
                <li><code>mouseleave</code> de sidebar â†’ collapse</li>
                <li>Click en navegaciÃ³n â†’ expandido 5 segundos â†’ auto-collapse</li>
                <li>BotÃ³n toggle manual: sigue funcionando</li>
            </ol>

            <p><strong>Ventajas</strong>:</p>
            <ul>
                <li>âœ… Maximiza espacio de trabajo</li>
                <li>âœ… Sidebar disponible al pasar mouse (sin clic)</li>
                <li>âœ… Se oculta automÃ¡ticamente (no molesta)</li>
                <li>âœ… Consistente en todos los mÃ³dulos</li>
            </ul>

            <p><strong>UbicaciÃ³n cÃ³digo</strong>:</p>
            <ul>
                <li>JS: <code>assets-cotizador/script-v2.js</code> funciÃ³n <code>setupSidebarAutoCollapse()</code> (lÃ­neas 580-630)</li>
                <li>TambiÃ©n en: <code>assets-ventas/script.js</code>, <code>assets-dashboard/script-v2.js</code>, <code>assets-clientes/script-v2.js</code></li>
            </ul>

            <p><strong>CÃ³digo implementado</strong>:</p>
            <pre><code>function setupSidebarAutoCollapse() {
    let collapseTimer = null;

    function startCollapseTimer() {
        clearTimeout(collapseTimer);
        collapseTimer = setTimeout(() => {
            els.sidebar.classList.add('collapsed');
        }, 5000); // 5 segundos
    }

    function expandSidebar() {
        els.sidebar.classList.remove('collapsed');
        clearTimeout(collapseTimer);
    }

    function collapseSidebar() {
        clearTimeout(collapseTimer);
        els.sidebar.classList.add('collapsed');
    }

    // Inicio: expandido, luego auto-collapse
    startCollapseTimer();

    // Hover behavior
    els.sidebar.addEventListener('mouseenter', expandSidebar);
    els.sidebar.addEventListener('mouseleave', collapseSidebar);

    // NavegaciÃ³n: expand y reinicia timer
    const navItems = els.sidebar.querySelectorAll('.nav-menu li, .btn-cotizador-nav');
    navItems.forEach(item => {
        item.addEventListener('click', () => {
            expandSidebar();
            startCollapseTimer();
        });
    });

    // Toggle button: mantiene funcionalidad
    els.btnToggleSidebar.addEventListener('click', () => {
        if (els.sidebar.classList.contains('collapsed')) {
            expandSidebar();
            startCollapseTimer();
        } else {
            collapseSidebar();
        }
    });
}</code></pre>

            <div class="note" style="border-left: 4px solid #0052cc; background: #e3f2fd; padding: 1rem; margin: 1.5rem 0;">
                <h3>ğŸ“‹ RESUMEN DE CAMBIOS DEL PROTOTIPO</h3>
                <p><strong>Archivos modificados</strong>:</p>
                <ul>
                    <li><code>cotizador-v2.html</code>: Estructura unificada + selector cliente directo</li>
                    <li><code>assets-cotizador/styles-v2.css</code>: Estilos <code>.client-search-container</code></li>
                    <li><code>assets-cotizador/script-v2.js</code>: LÃ³gica simplificada + sidebar auto-collapse</li>
                </ul>
                <p><strong>Impacto</strong>:</p>
                <ul>
                    <li>âœ… ReducciÃ³n 1 clic por cotizaciÃ³n (selector cliente)</li>
                    <li>âœ… Flujo unificado REPARTO/FÃBRICA (menos confusiÃ³n)</li>
                    <li>âœ… Mejor UX con sidebar auto-collapse</li>
                    <li>âœ… CÃ³digo mÃ¡s simple y mantenible</li>
                </ul>
            </div>
        </section>

    </main>
</body>

</html>