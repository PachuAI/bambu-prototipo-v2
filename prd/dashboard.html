<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PRD - Dashboard | Bambu CRM V2</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="assets/styles.css">
</head>

<body>

    <button class="mobile-menu-toggle" onclick="document.getElementById('sidebar').classList.toggle('open')">â˜° MenÃº</button>

    <nav id="sidebar">
        <div class="logo">
            <span>â—†</span> Bambu CRM v2
        </div>

        <div class="nav-group">
            <div class="nav-header">NavegaciÃ³n</div>
            <a href="index.html" class="nav-link">â† PRD General</a>
        </div>

        <div class="nav-group">
            <div class="nav-header">Otros MÃ³dulos</div>
            <a href="cotizador-especificacion.html" class="nav-link">Cotizador</a>
            <a href="ventas.html" class="nav-link">Ventas</a>
            <a href="dashboard.html" class="nav-link active">Dashboard</a>
        </div>

        <div class="nav-group">
            <div class="nav-header">En esta pÃ¡gina</div>
            <ul id="toc" style="list-style: none; padding: 0; margin: 0;">
                <!-- Auto-generado desde los h2 -->
            </ul>
        </div>
    </nav>

    <main>
        <header>
            <div style="margin-bottom: 1rem; font-size: 0.9rem; color: var(--text-secondary); text-transform: uppercase;">
                QuÃ­mica Bambu S.R.L.
            </div>
            <h1>PRD: Dashboard <br><span style="font-weight: 300; font-size: 1.5rem; color: var(--text-secondary);">Pantalla principal del sistema</span></h1>

            <table>
                <tr>
                    <td style="width: 150px;"><strong>VersiÃ³n</strong></td>
                    <td>2.0</td>
                </tr>
                <tr>
                    <td><strong>Fecha</strong></td>
                    <td>31 Diciembre 2024</td>
                </tr>
                <tr>
                    <td><strong>Estado</strong></td>
                    <td>âš ï¸ Borrador (pendiente prototipar y validar)</td>
                </tr>
            </table>

            <div class="note" style="background: #fff3cd; border-left: 4px solid #ffc107; padding: 1rem; margin: 1rem 0;">
                <p style="margin: 0;"><strong>âš ï¸ Nota importante:</strong> Este PRD es documentaciÃ³n modular de referencia. Solo Cotizador y Ventas estÃ¡n prototipados/validados al 100%. El contenido de Dashboard probablemente cambie al prototipar e implementar.</p>
            </div>
        </header>

        <!-- SECCIÃ“N 1: CONTEXTO Y OBJETIVO -->
        <section id="contexto">
            <h2>1. Contexto y Objetivo</h2>

            <h3>1.1 PropÃ³sito del mÃ³dulo</h3>
            <p>El <strong>Dashboard</strong> es la pantalla principal al ingresar al sistema. Provee una vista ejecutiva del estado operativo diario: resumen de pedidos, alertas de stock bajo, calendario de repartos, y acceso rÃ¡pido a funciones crÃ­ticas mediante buscador global.</p>

            <h3>1.2 Problema que resuelve</h3>
            <ul>
                <li>Vista panorÃ¡mica del estado operativo en un solo vistazo</li>
                <li>Acceso rÃ¡pido a cualquier entidad (cliente, producto, pedido) mediante buscador global</li>
                <li>IdentificaciÃ³n inmediata de alertas crÃ­ticas (stock bajo, pedidos pendientes)</li>
                <li>Resumen diario de repartos y carga de vehÃ­culos</li>
                <li>Punto de entrada intuitivo al sistema</li>
            </ul>

            <h3>1.3 Usuarios principales</h3>
            <ul>
                <li><strong>Administrador:</strong> Ve todos los widgets y mÃ©tricas completas</li>
                <li><strong>Vendedor:</strong> Ve widgets relevantes (pedidos del dÃ­a, buscador, accesos rÃ¡pidos)</li>
            </ul>

            <h3>1.4 SimplificaciÃ³n v1 â†’ v2</h3>
            <table>
                <thead>
                    <tr>
                        <th>Aspecto</th>
                        <th>v1</th>
                        <th>v2</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Buscador global</td>
                        <td>âŒ No existÃ­a</td>
                        <td>âœ… Nuevo - BÃºsqueda unificada con atajo teclado</td>
                    </tr>
                    <tr>
                        <td>Alertas stock bajo</td>
                        <td>Lista larga</td>
                        <td>Formato compacto (8-10 productos simultÃ¡neos)</td>
                    </tr>
                    <tr>
                        <td>Zona "Pedidos pendientes asignar"</td>
                        <td>âœ… ExistÃ­a</td>
                        <td>âŒ Eliminado (no aporta valor)</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <!-- SECCIÃ“N 2: FUNCIONALIDAD PRINCIPAL -->
        <section id="funcionalidad">
            <h2>2. Funcionalidad Principal</h2>

            <h3>2.1 DescripciÃ³n general</h3>
            <p>El Dashboard se divide en 4 Ã¡reas principales:</p>
            <ul>
                <li><strong>Buscador global:</strong> Campo de bÃºsqueda prominente en la parte superior (NUEVO v2)</li>
                <li><strong>Carrusel de calendario:</strong> Resumen de cada dÃ­a en tÃ©rminos de pedidos y kilos</li>
                <li><strong>Pedidos en trÃ¡nsito del dÃ­a:</strong> Vista rÃ¡pida de repartos programados para hoy</li>
                <li><strong>Alertas de stock bajo:</strong> Productos que estÃ¡n por debajo del stock mÃ­nimo (8-10 simultÃ¡neos)</li>
            </ul>

            <h3>2.2 CaracterÃ­sticas clave</h3>
            <ul>
                <li>âœ… Buscador global con resultados agrupados (clientes, productos, pedidos)</li>
                <li>âœ… Atajo de teclado para buscador (pendiente definir tecla)</li>
                <li>âœ… Carrusel de calendario semanal (lunes a viernes)</li>
                <li>âœ… Resumen por dÃ­a: Cantidad de pedidos + Total kg</li>
                <li>âœ… Pedidos del dÃ­a en trÃ¡nsito (clickeables â†’ Ventas)</li>
                <li>âœ… Alertas de stock bajo (formato compacto optimizado)</li>
                <li>âœ… Accesos rÃ¡pidos a mÃ³dulos principales</li>
            </ul>

            <h3>2.3 Flujo de trabajo tÃ­pico</h3>
            <pre><code>Usuario ingresa al sistema
        â†“
Dashboard se carga como pantalla principal
        â†“
Ve vista panorÃ¡mica:
â”œâ”€ Buscador global (parte superior)
â”œâ”€ Carrusel de calendario (resumen semana)
â”œâ”€ Pedidos del dÃ­a en trÃ¡nsito
â””â”€ Alertas de stock bajo
        â†“
Acciones disponibles:
â”œâ”€ Buscar cliente/producto/pedido (buscador global)
â”œâ”€ Click en dÃ­a del calendario â†’ Ventas filtrado por esa fecha
â”œâ”€ Click en pedido del dÃ­a â†’ Abrir detalle en Ventas
â”œâ”€ Click en alerta stock â†’ Ir a Productos
â””â”€ Click en acceso rÃ¡pido â†’ Ir a mÃ³dulo correspondiente</code></pre>
        </section>

        <!-- SECCIÃ“N 3: INTERFAZ DE USUARIO -->
        <section id="interfaz">
            <h2>3. Interfaz de Usuario</h2>

            <h3>3.1 Layout general</h3>
            <p><strong>Vista principal:</strong> Pantalla dividida en secciones verticales (widgets)</p>

            <p><strong>Estructura:</strong></p>
            <pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DASHBOARD                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ğŸ” Buscador global: Clientes, productos, pedidos...]  â”‚ â† NUEVO
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“… CALENDARIO SEMANAL                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”                            â”‚
â”‚  â”‚Lun â”‚Mar â”‚Mie â”‚Jue â”‚Vie â”‚                            â”‚
â”‚  â”‚15p â”‚12p â”‚8p  â”‚20p â”‚18p â”‚ â† Cantidad pedidos         â”‚
â”‚  â”‚450 â”‚380 â”‚250 â”‚720 â”‚650 â”‚ â† Total kg                 â”‚
â”‚  â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸšš PEDIDOS DEL DÃA EN TRÃNSITO                         â”‚
â”‚  Pedido #152 | Av. Argentina 456 | Reparto 1 | 45kg    â”‚
â”‚  Pedido #165 | Calle Falsa 123 | Reparto 2 | 32kg      â”‚
â”‚  ... (lista de pedidos de hoy)                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  âš ï¸ ALERTAS DE STOCK BAJO (8-10 productos)              â”‚
â”‚  Detergente X: 15 un (mÃ­n: 20) | Lavandina Y: 8 un...  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>

            <h3>3.2 Buscador global (NUEVO v2)</h3>
            <p><strong>UbicaciÃ³n:</strong> Parte superior del Dashboard, campo prominente y destacado</p>

            <p><strong>Funcionalidad:</strong></p>
            <ul>
                <li>Busca simultÃ¡neamente en: Clientes (direcciÃ³n), Productos (nombre), Pedidos (nÃºmero o direcciÃ³n)</li>
                <li>Resultados agrupados por tipo con Ã­cono identificador:
                    <ul>
                        <li>ğŸ‘¤ Clientes</li>
                        <li>ğŸ“¦ Productos</li>
                        <li>ğŸ§¾ Pedidos</li>
                    </ul>
                </li>
                <li>Muestra mÃ¡ximo 5 resultados por categorÃ­a (los mÃ¡s relevantes)</li>
                <li>Click en resultado â†’ Navega directamente al detalle correspondiente</li>
                <li>Atajo de teclado: Ctrl+K o Cmd+K (pendiente definir)</li>
            </ul>

            <p><strong>Ejemplo de resultados:</strong></p>
            <pre><code>BÃºsqueda: "Av Argentina"

ğŸ‘¤ CLIENTES (2 resultados)
  â†’ Av. Argentina 456 | Tel: 299-1234567
  â†’ Av. Argentina 890 | Tel: 299-7654321

ğŸ§¾ PEDIDOS (1 resultado)
  â†’ Pedido #152 | Av. Argentina 456 | 25/12/2024 | $45.000</code></pre>

            <div class="note" style="background: #e7f3ff; border-left: 4px solid #2196F3; padding: 1rem; margin: 1rem 0;">
                <p style="margin: 0;"><strong>â­ NUEVO v2:</strong> El buscador global es una de las mejoras mÃ¡s importantes de v2. Permite acceso rÃ¡pido a cualquier entidad sin navegar por mÃºltiples mÃ³dulos.</p>
            </div>

            <h3>3.3 Carrusel de calendario</h3>
            <p><strong>Vista:</strong> Carrusel horizontal mostrando dÃ­as de la semana (lunes a viernes)</p>

            <p><strong>InformaciÃ³n por dÃ­a:</strong></p>
            <ul>
                <li>DÃ­a de la semana (Lun, Mar, Mie, Jue, Vie)</li>
                <li>Fecha (ej: 25/12)</li>
                <li>Cantidad de pedidos programados para ese dÃ­a</li>
                <li>Total de kg a repartir ese dÃ­a</li>
                <li>Indicador visual si es dÃ­a actual (destacado)</li>
            </ul>

            <p><strong>InteracciÃ³n:</strong></p>
            <ul>
                <li>Click en un dÃ­a â†’ Redirige a Ventas filtrado por esa fecha</li>
                <li>Flechas < > para navegar entre semanas</li>
                <li>Default: Muestra semana actual</li>
            </ul>

            <p><strong>Ejemplo visual:</strong></p>
            <pre><code>< Semana del 23 al 27 de Diciembre >

â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”
â”‚ Lun â”‚ Mar â”‚ Mie â”‚ Jue â”‚ Vie â”‚
â”‚ 23  â”‚ 24  â”‚ 25* â”‚ 26  â”‚ 27  â”‚
â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤
â”‚ 15p â”‚ 12p â”‚ 8p  â”‚ 20p â”‚ 18p â”‚
â”‚450kgâ”‚380kgâ”‚250kgâ”‚720kgâ”‚650kgâ”‚
â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜
        * = DÃ­a actual (destacado)</code></pre>

            <h3>3.4 Pedidos del dÃ­a en trÃ¡nsito</h3>
            <p><strong>Vista:</strong> Lista compacta de pedidos programados para HOY</p>

            <p><strong>InformaciÃ³n por pedido:</strong></p>
            <ul>
                <li>Pedido # (clickeable)</li>
                <li>DirecciÃ³n del cliente</li>
                <li>VehÃ­culo asignado (si tiene)</li>
                <li>Peso total (kg)</li>
            </ul>

            <p><strong>InteracciÃ³n:</strong></p>
            <ul>
                <li>Click en pedido â†’ Abre detalle en mÃ³dulo Ventas</li>
                <li>Ordenado por vehÃ­culo asignado (Reparto 1, Reparto 2, Sin asignar)</li>
            </ul>

            <p><strong>Ejemplo:</strong></p>
            <pre><code>ğŸšš PEDIDOS DEL DÃA EN TRÃNSITO (MiÃ©rcoles 25/12)

Reparto 1:
  Pedido #152 | Av. Argentina 456 | 45kg
  Pedido #165 | Calle Falsa 123 | 32kg

Reparto 2:
  Pedido #170 | Ruta 22 Km 5 | 28kg

Sin asignar:
  Pedido #175 | NeuquÃ©n Centro 890 | 15kg</code></pre>

            <h3>3.5 Alertas de stock bajo</h3>
            <p><strong>Vista:</strong> Panel compacto mostrando 8-10 productos con stock bajo simultÃ¡neamente</p>

            <p><strong>InformaciÃ³n por producto:</strong></p>
            <ul>
                <li>Nombre del producto</li>
                <li>Stock actual</li>
                <li>Stock mÃ­nimo configurado</li>
                <li>Indicador visual (color rojo/amarillo segÃºn criticidad)</li>
            </ul>

            <p><strong>Criterio de alerta:</strong></p>
            <ul>
                <li>ğŸ”´ CrÃ­tico: stock_actual <= stock_minimo / 2 (menos de la mitad del mÃ­nimo)</li>
                <li>ğŸŸ¡ Advertencia: stock_actual > stock_minimo / 2 AND stock_actual < stock_minimo</li>
            </ul>

            <p><strong>InteracciÃ³n:</strong></p>
            <ul>
                <li>Click en producto â†’ Ir a Productos (abre modal Ajustar Stock)</li>
                <li>Ordenado por criticidad (crÃ­ticos primero)</li>
            </ul>

            <p><strong>Ejemplo:</strong></p>
            <pre><code>âš ï¸ ALERTAS DE STOCK BAJO

ğŸ”´ Detergente X: 8 un (mÃ­n: 20) â† CrÃ­tico
ğŸ”´ Lavandina Y: 5 un (mÃ­n: 15) â† CrÃ­tico
ğŸŸ¡ Cloro Z: 12 un (mÃ­n: 20) â† Advertencia
ğŸŸ¡ Desengrasante: 18 un (mÃ­n: 25) â† Advertencia
...</code></pre>

            <div class="note" style="background: #f8f9fa; border-left: 4px solid #6c757d; padding: 1rem; margin: 1rem 0;">
                <p style="margin: 0;"><strong>â­ MEJORADO v2:</strong> Formato compacto optimizado que muestra 8-10 productos simultÃ¡neamente (antes mostraba lista larga poco legible).</p>
            </div>

            <h3>3.6 Accesos rÃ¡pidos (opcional)</h3>
            <p><strong>Vista:</strong> Botones grandes para mÃ³dulos principales</p>

            <p><strong>Accesos sugeridos:</strong></p>
            <ul>
                <li>[+ Nueva CotizaciÃ³n] â†’ Abre Cotizador</li>
                <li>[Ver Ventas] â†’ Abre mÃ³dulo Ventas</li>
                <li>[Calendario Repartos] â†’ Abre Ventas en tab Calendario</li>
                <li>[Productos] â†’ Abre mÃ³dulo Productos</li>
            </ul>
        </section>

        <!-- SECCIÃ“N 4: REGLAS DE NEGOCIO -->
        <section id="reglas">
            <h2>4. Reglas de Negocio EspecÃ­ficas</h2>

            <h3>4.1 Buscador global</h3>
            <p><strong>Criterios de bÃºsqueda:</strong></p>
            <table>
                <thead>
                    <tr>
                        <th>CategorÃ­a</th>
                        <th>Campos de bÃºsqueda</th>
                        <th>Resultado mostrado</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Clientes</strong></td>
                        <td>DirecciÃ³n, telÃ©fono, email</td>
                        <td>DirecciÃ³n | TelÃ©fono</td>
                    </tr>
                    <tr>
                        <td><strong>Productos</strong></td>
                        <td>Nombre</td>
                        <td>Nombre | Precio L1 | Stock</td>
                    </tr>
                    <tr>
                        <td><strong>Pedidos</strong></td>
                        <td>NÃºmero de pedido, direcciÃ³n cliente</td>
                        <td>Pedido # | Cliente | Fecha | Total</td>
                    </tr>
                </tbody>
            </table>

            <p><strong>Orden de resultados:</strong></p>
            <ul>
                <li>Por relevancia (coincidencia exacta > coincidencia parcial)</li>
                <li>Dentro de cada categorÃ­a: Ordenado alfabÃ©ticamente</li>
                <li>MÃ¡ximo 5 resultados por categorÃ­a</li>
            </ul>

            <h3>4.2 Carrusel de calendario</h3>
            <p><strong>CÃ¡lculo de mÃ©tricas por dÃ­a:</strong></p>
            <ul>
                <li><strong>Cantidad de pedidos:</strong> COUNT de pedidos con fecha = ese dÃ­a AND tipo = "REPARTO" AND estado != "Entregado"</li>
                <li><strong>Total kg:</strong> SUM de peso de todos los productos en esos pedidos</li>
            </ul>

            <p><strong>Solo dÃ­as laborales:</strong></p>
            <ul>
                <li>Carrusel muestra SOLO lunes a viernes</li>
                <li>SÃ¡bados y domingos NO aparecen (no se trabaja)</li>
            </ul>

            <h3>4.3 Alertas de stock bajo</h3>
            <p><strong>Criterio de inclusiÃ³n:</strong></p>
            <ul>
                <li>Producto con <code>stock_actual < stock_minimo</code></li>
                <li>Producto con <code>disponible = true</code> (activos Ãºnicamente)</li>
                <li>Ordenado por criticidad: (stock_actual / stock_minimo) ASC</li>
            </ul>

            <p><strong>Color de alerta:</strong></p>
            <ul>
                <li>ğŸ”´ Rojo: <code>stock_actual <= stock_minimo / 2</code></li>
                <li>ğŸŸ¡ Amarillo: <code>stock_actual > stock_minimo / 2 AND stock_actual < stock_minimo</code></li>
            </ul>

            <h3>4.4 Pedidos del dÃ­a en trÃ¡nsito</h3>
            <p><strong>Criterio de inclusiÃ³n:</strong></p>
            <ul>
                <li>Pedido con <code>fecha = HOY</code></li>
                <li>Pedido con <code>tipo = "REPARTO"</code></li>
                <li>Pedido con <code>estado IN ("Pendiente", "Asignado", "En trÃ¡nsito")</code></li>
                <li>NO incluye <code>estado = "Entregado"</code> (ya completados)</li>
            </ul>

            <p><strong>Ordenamiento:</strong></p>
            <ol>
                <li>Por vehÃ­culo asignado (Reparto 1, Reparto 2, ..., Sin asignar al final)</li>
                <li>Dentro de cada vehÃ­culo: Por ciudad (A-Z)</li>
            </ol>
        </section>

        <!-- SECCIÃ“N 5: INTEGRACIÃ“N -->
        <section id="integracion">
            <h2>5. IntegraciÃ³n con Otros MÃ³dulos</h2>

            <h3>5.1 Ventas</h3>
            <p><strong>RelaciÃ³n:</strong> Dashboard consume datos de pedidos del mÃ³dulo Ventas</p>

            <p><strong>SincronizaciÃ³n:</strong></p>
            <ul>
                <li>Carrusel de calendario: Query a tabla pedidos por rango de fechas</li>
                <li>Pedidos del dÃ­a: Query a tabla pedidos con fecha = HOY</li>
                <li>Click en pedido â†’ Abre detalle en Ventas</li>
                <li>Click en dÃ­a del calendario â†’ Redirige a Ventas filtrado por esa fecha</li>
            </ul>

            <h3>5.2 Productos</h3>
            <p><strong>RelaciÃ³n:</strong> Dashboard muestra alertas de stock desde mÃ³dulo Productos</p>

            <p><strong>SincronizaciÃ³n:</strong></p>
            <ul>
                <li>Alertas stock bajo: Query a tabla productos WHERE stock_actual < stock_minimo</li>
                <li>Buscador global: Query a tabla productos WHERE nombre LIKE '%search%'</li>
                <li>Click en alerta stock â†’ Redirige a Productos</li>
            </ul>

            <h3>5.3 Clientes</h3>
            <p><strong>RelaciÃ³n:</strong> Buscador global busca en tabla de clientes</p>

            <p><strong>SincronizaciÃ³n:</strong></p>
            <ul>
                <li>Buscador: Query a tabla clientes WHERE direccion LIKE '%search%' OR telefono LIKE '%search%'</li>
                <li>Click en cliente â†’ Redirige a Clientes (vista detallada)</li>
            </ul>

            <h3>5.4 Cotizador</h3>
            <p><strong>RelaciÃ³n:</strong> Acceso rÃ¡pido desde Dashboard</p>

            <p><strong>SincronizaciÃ³n:</strong></p>
            <ul>
                <li>BotÃ³n "[+ Nueva CotizaciÃ³n]" abre Cotizador en blanco</li>
            </ul>
        </section>

        <!-- SECCIÃ“N 6: CASOS DE USO -->
        <section id="casos-uso">
            <h2>6. Casos de Uso</h2>

            <h3>Caso 1: Buscar cliente rÃ¡pidamente</h3>
            <p><strong>Contexto:</strong> Vendedor necesita acceder a informaciÃ³n de un cliente</p>
            <p><strong>AcciÃ³n:</strong></p>
            <ol>
                <li>Vendedor ingresa al sistema (Dashboard se carga)</li>
                <li>Click en buscador global o presiona Ctrl+K</li>
                <li>Escribe: "Av Argentina"</li>
                <li>Ve resultados:
                    <ul>
                        <li>ğŸ‘¤ Av. Argentina 456 | Tel: 299-1234567</li>
                        <li>ğŸ‘¤ Av. Argentina 890 | Tel: 299-7654321</li>
                    </ul>
                </li>
                <li>Click en primer resultado</li>
            </ol>
            <p><strong>Resultado:</strong></p>
            <ul>
                <li>âœ… Redirige a Clientes â†’ Vista detallada del cliente "Av. Argentina 456"</li>
                <li>âœ… Puede ver cuenta corriente, historial de pedidos, etc.</li>
            </ul>

            <h3>Caso 2: Ver resumen de pedidos de la semana</h3>
            <p><strong>Contexto:</strong> Administrador quiere saber cuÃ¡ntos pedidos hay cada dÃ­a</p>
            <p><strong>AcciÃ³n:</strong></p>
            <ol>
                <li>Administrador ingresa al Dashboard</li>
                <li>Ve carrusel de calendario con resumen semanal</li>
            </ol>
            <p><strong>Resultado:</strong></p>
            <ul>
                <li>âœ… Ve cantidad de pedidos por dÃ­a: Lun 15p, Mar 12p, Mie 8p, Jue 20p, Vie 18p</li>
                <li>âœ… Ve total kg por dÃ­a: Lun 450kg, Mar 380kg, Mie 250kg, Jue 720kg, Vie 650kg</li>
                <li>âœ… Identifica que Jueves tiene mayor carga (20 pedidos, 720kg)</li>
            </ul>

            <h3>Caso 3: Controlar repartos del dÃ­a</h3>
            <p><strong>Contexto:</strong> Operador quiere ver quÃ© pedidos estÃ¡n programados para hoy</p>
            <p><strong>AcciÃ³n:</strong></p>
            <ol>
                <li>Operador ingresa al Dashboard</li>
                <li>Ve secciÃ³n "Pedidos del dÃ­a en trÃ¡nsito"</li>
            </ol>
            <p><strong>Resultado:</strong></p>
            <ul>
                <li>âœ… Ve lista de pedidos de hoy agrupados por vehÃ­culo</li>
                <li>âœ… Puede hacer click en pedido para ver detalle completo</li>
                <li>âœ… Identifica pedidos sin asignar que necesitan atenciÃ³n</li>
            </ul>

            <h3>Caso 4: Detectar productos con stock crÃ­tico</h3>
            <p><strong>Contexto:</strong> Administrador quiere saber quÃ© productos necesitan reposiciÃ³n</p>
            <p><strong>AcciÃ³n:</strong></p>
            <ol>
                <li>Administrador ingresa al Dashboard</li>
                <li>Ve secciÃ³n "Alertas de stock bajo"</li>
            </ol>
            <p><strong>Resultado:</strong></p>
            <ul>
                <li>âœ… Ve productos con stock crÃ­tico:
                    <ul>
                        <li>ğŸ”´ Detergente X: 8 un (mÃ­n: 20) â† CrÃ­tico</li>
                        <li>ğŸ”´ Lavandina Y: 5 un (mÃ­n: 15) â† CrÃ­tico</li>
                    </ul>
                </li>
                <li>âœ… Click en producto â†’ Va a Productos para ajustar stock</li>
            </ul>

            <h3>Caso 5: Buscar pedido por nÃºmero</h3>
            <p><strong>Contexto:</strong> Vendedor recibe llamado de cliente preguntando por pedido #152</p>
            <p><strong>AcciÃ³n:</strong></p>
            <ol>
                <li>Vendedor en Dashboard</li>
                <li>Click en buscador global</li>
                <li>Escribe: "152"</li>
                <li>Ve resultado:
                    <ul>
                        <li>ğŸ§¾ Pedido #152 | Av. Argentina 456 | 25/12/2024 | $45.000</li>
                    </ul>
                </li>
                <li>Click en resultado</li>
            </ol>
            <p><strong>Resultado:</strong></p>
            <ul>
                <li>âœ… Redirige a Ventas â†’ Detalle del pedido #152</li>
                <li>âœ… Puede ver estado, productos, cliente, etc.</li>
            </ul>

            <h3>Caso 6: Navegar a dÃ­a especÃ­fico del calendario</h3>
            <p><strong>Contexto:</strong> Administrador quiere revisar pedidos del Jueves</p>
            <p><strong>AcciÃ³n:</strong></p>
            <ol>
                <li>Administrador en Dashboard</li>
                <li>Ve carrusel de calendario</li>
                <li>Click en "Jue 26"</li>
            </ol>
            <p><strong>Resultado:</strong></p>
            <ul>
                <li>âœ… Redirige a Ventas con filtro de fecha = 26/12/2024</li>
                <li>âœ… Ve lista completa de pedidos programados para ese dÃ­a</li>
            </ul>
        </section>

        <!-- SECCIÃ“N 7: FLUJOS DE USUARIO -->
        <section id="flujos">
            <h2>7. Flujos de Usuario</h2>

            <h3>7.1 Flujo principal: Acceso al sistema</h3>
            <pre><code>Usuario hace login
        â†“
Dashboard se carga como pantalla principal
        â†“
Vista panorÃ¡mica muestra:
â”œâ”€ Buscador global (parte superior)
â”œâ”€ Carrusel calendario (resumen semana)
â”œâ”€ Pedidos del dÃ­a en trÃ¡nsito
â””â”€ Alertas de stock bajo
        â†“
Usuario puede:
â”œâ”€ Usar buscador global (Ctrl+K)
â”œâ”€ Ver resumen semanal en calendario
â”œâ”€ Click en pedido del dÃ­a
â”œâ”€ Click en alerta stock
â””â”€ Acceso rÃ¡pido a mÃ³dulos</code></pre>

            <h3>7.2 Flujo: Buscador global</h3>
            <pre><code>Usuario en Dashboard
        â†“
Click en buscador global o presiona Ctrl+K
        â†“
Campo se activa (foco automÃ¡tico)
        â†“
Usuario escribe tÃ©rmino de bÃºsqueda
        â†“
Sistema busca en paralelo:
â”œâ”€ Clientes (direccion, telefono, email)
â”œâ”€ Productos (nombre)
â””â”€ Pedidos (numero, direccion cliente)
        â†“
Resultados se muestran agrupados:
â”œâ”€ ğŸ‘¤ CLIENTES (mÃ¡x 5)
â”œâ”€ ğŸ“¦ PRODUCTOS (mÃ¡x 5)
â””â”€ ğŸ§¾ PEDIDOS (mÃ¡x 5)
        â†“
Usuario hace click en resultado
        â†“
Sistema redirige:
â”œâ”€ Cliente â†’ Clientes (vista detallada)
â”œâ”€ Producto â†’ Productos (abre modal editar)
â””â”€ Pedido â†’ Ventas (detalle pedido)</code></pre>

            <h3>7.3 Flujo: Navegar calendario</h3>
            <pre><code>Usuario en Dashboard
        â†“
Ve carrusel de calendario (semana actual)
        â†“
Acciones disponibles:
â”œâ”€ Click en dÃ­a especÃ­fico â†’ Redirige a Ventas filtrado por esa fecha
â”œâ”€ Click en flecha < â†’ Navega a semana anterior
â””â”€ Click en flecha > â†’ Navega a semana siguiente
        â†“
Carrusel se actualiza mostrando semana seleccionada
        â†“
MÃ©tricas se recalculan para esa semana:
â”œâ”€ Cantidad de pedidos por dÃ­a
â””â”€ Total kg por dÃ­a</code></pre>
        </section>

        <!-- SECCIÃ“N 8: NOTAS TÃ‰CNICAS -->
        <section id="notas-tecnicas">
            <h2>8. Notas TÃ©cnicas para Desarrollo</h2>

            <h3>8.1 Estructura de datos (Mock data)</h3>
            <pre><code class="language-javascript">// Resumen dÃ­a del calendario
const RESUMEN_DIA = {
    fecha: "2024-12-25",
    dia_semana: "Mie",
    cantidad_pedidos: 8,
    total_kg: 250
};

// Alerta de stock bajo
const ALERTA_STOCK = {
    producto_id: 1,
    producto_nombre: "Detergente X",
    stock_actual: 8,
    stock_minimo: 20,
    criticidad: "CRITICO" // "CRITICO" | "ADVERTENCIA"
};

// Resultado de bÃºsqueda global
const RESULTADO_BUSQUEDA = {
    clientes: [
        { id: 1, direccion: "Av. Argentina 456", telefono: "299-1234567" }
    ],
    productos: [
        { id: 5, nombre: "Detergente X", precio_l1: 4500, stock: 120 }
    ],
    pedidos: [
        { id: 152, cliente_direccion: "Av. Argentina 456", fecha: "2024-12-25", total: 45000 }
    ]
};
</code></pre>

            <h3>8.2 Consideraciones de implementaciÃ³n</h3>
            <ul>
                <li>âš ï¸ <strong>Performance buscador:</strong> Implementar debounce (300ms) para evitar queries excesivos mientras escribe</li>
                <li>âš ï¸ <strong>CachÃ© dashboard:</strong> Cachear mÃ©tricas del calendario (refrescar cada 5 minutos o al cambiar datos)</li>
                <li>âš ï¸ <strong>Ãndices DB:</strong> Asegurar Ã­ndices en: pedidos.fecha, productos.stock_actual, clientes.direccion</li>
                <li>ğŸ’¡ <strong>Atajo teclado:</strong> Implementar event listener global para Ctrl+K (foco en buscador)</li>
                <li>ğŸ’¡ <strong>Carrusel:</strong> Usar librerÃ­a como Swiper.js (vanilla) o implementar scroll horizontal custom</li>
                <li>ğŸ’¡ <strong>ActualizaciÃ³n en tiempo real:</strong> Considerar WebSockets o polling cada X segundos para widgets dinÃ¡micos</li>
            </ul>

            <h3>8.3 Queries SQL Ãºtiles</h3>
            <pre><code class="language-sql">-- Resumen de pedidos por dÃ­a (carrusel calendario)
SELECT
    DATE(fecha) as fecha,
    COUNT(*) as cantidad_pedidos,
    SUM(peso_total_kg) as total_kg
FROM pedidos
WHERE fecha BETWEEN ? AND ?
AND tipo = 'REPARTO'
AND estado != 'Entregado'
GROUP BY DATE(fecha)
ORDER BY fecha ASC;

-- Pedidos del dÃ­a en trÃ¡nsito
SELECT
    p.id,
    p.fecha,
    c.direccion as cliente_direccion,
    v.nombre as vehiculo,
    p.peso_total_kg
FROM pedidos p
LEFT JOIN clientes c ON p.cliente_id = c.id
LEFT JOIN vehiculos v ON p.vehiculo_id = v.id
WHERE DATE(p.fecha) = CURDATE()
AND p.tipo = 'REPARTO'
AND p.estado IN ('Pendiente', 'Asignado', 'En trÃ¡nsito')
ORDER BY v.nombre ASC, c.ciudad ASC;

-- Alertas de stock bajo
SELECT
    id,
    nombre,
    stock_actual,
    stock_minimo,
    CASE
        WHEN stock_actual <= stock_minimo / 2 THEN 'CRITICO'
        ELSE 'ADVERTENCIA'
    END as criticidad
FROM productos
WHERE stock_actual < stock_minimo
AND disponible = true
ORDER BY (stock_actual / stock_minimo) ASC
LIMIT 10;

-- Buscador global
-- Clientes
SELECT 'cliente' as tipo, id, direccion, telefono
FROM clientes
WHERE direccion LIKE CONCAT('%', ?, '%')
   OR telefono LIKE CONCAT('%', ?, '%')
LIMIT 5;

-- Productos
SELECT 'producto' as tipo, id, nombre, precio_l1, stock_actual
FROM productos
WHERE nombre LIKE CONCAT('%', ?, '%')
LIMIT 5;

-- Pedidos
SELECT 'pedido' as tipo, p.id, c.direccion, p.fecha, p.total
FROM pedidos p
LEFT JOIN clientes c ON p.cliente_id = c.id
WHERE p.id = ?
   OR c.direccion LIKE CONCAT('%', ?, '%')
LIMIT 5;</code></pre>

            <h3>8.4 ImplementaciÃ³n buscador global</h3>
            <pre><code class="language-javascript">// FunciÃ³n de bÃºsqueda con debounce
let searchTimeout;
function buscarGlobal(termino) {
    clearTimeout(searchTimeout);
    searchTimeout = setTimeout(async () => {
        if (termino.length < 2) return; // MÃ­nimo 2 caracteres

        const resultados = await fetch(`/api/buscar?q=${termino}`).then(r => r.json());

        mostrarResultados(resultados);
    }, 300); // Debounce de 300ms
}

// Atajo de teclado
document.addEventListener('keydown', (e) => {
    if ((e.ctrlKey || e.metaKey) && e.key === 'k') {
        e.preventDefault();
        document.getElementById('buscador-global').focus();
    }
});
</code></pre>
        </section>

        <!-- PIE DE PÃGINA -->
        <footer>
            <p>Bambu CRM V2 - PRD TÃ©cnico | Ãšltima actualizaciÃ³n: 31 Diciembre 2024</p>
            <p><a href="index.html">â† Volver al PRD General</a></p>
        </footer>
    </main>

    <!-- SCRIPT PARA TOC AUTO -->
    <script>
        // Auto-generar tabla de contenidos desde los h2
        const toc = document.getElementById('toc');
        const h2s = document.querySelectorAll('main h2');
        h2s.forEach(h2 => {
            const li = document.createElement('li');
            const a = document.createElement('a');
            a.href = '#' + h2.parentElement.id;
            a.textContent = h2.textContent;
            a.className = 'nav-link';
            li.appendChild(a);
            toc.appendChild(li);
        });

        // Mobile menu toggle
        document.querySelector('.mobile-menu-toggle')?.addEventListener('click', () => {
            document.getElementById('sidebar').classList.toggle('open');
        });
    </script>
</body>

</html>
